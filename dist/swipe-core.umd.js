!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["swipe-core"]=t()}(this,function(){"use strict";function S(e,t,n){e.addEventListener(t,n,!1)}function V(e,t,n){e.removeEventListener(t,n,!1)}function B(e){return"function"==typeof e}function G(e){var n=this;this.list=[],e.forEach(function(e,t){e.index=t,n.append(e)})}G.prototype.append=function(e){var t,n=(t=e).next=t.prev=t;return this.list.push(n),this.tail?(n.prev=this.tail,n.next=this.tail.next,(this.tail.next=n).next.prev=n,this.tail=n):this.head=this.tail=n};var e=["webkit","moz","ms","o"],H=e.reduce(function(e,t){return e||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),J=e.reduce(function(e,t){return e||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!H||!J){var n=0;H=function(e){var t=+new Date;return n=Math.max(t,n+16),setTimeout(e,n-t)},J=clearTimeout}var K=function(e){return--e*e*e+1},Q="touchstart",U="touchmove",W="touchend",Z=function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)},$={root:null,rootMargin:"0px",threshold:[0,.01]},_=120,ee=250,te=1e3,ne=2*te/3,ie=3e3,oe={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1},t=document.createElement("div");t.style.display="none",document.body.appendChild(t);var re=function(e,t){e.x=t,ae(e,t)},ue=function(e){return t.appendChild(e)};function ae(e,t){e&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+t+"px, 0, 0)")}return function(e){var n=Object.assign({},oe,e),i=n.index,o=n.root,r=n.elms,u=n.width,a=n.height,s=n.cycle,c=n.expose,f=n.auto,l=n.css,d=n.onEnd;if(o){l&&(u=Number(Z(o,"width").slice(0,-2)),a=Number(Z(o,"height").slice(0,-2)));var h=o.children[0],p={main:-1,auto:-1},v=u/3,x=0,t=0,m=0,w=0,y=0,b=0,g=0,D=0,M=0,E=[],T=!1;f=s&&f;var C=r[i],A=function(e){return h.appendChild(e)},F=function(e){return!s&&g<D&&C===E.head},N=function(e){return!s&&D<=g&&C===E.tail},k=function(e){return clearTimeout(p.auto)},O=function(e){k(),J(p.main)};return function(){if(0!==r.length){c||(o.style.overflow="hidden"),o.style.position="relative",l||(o.style.width=u+"px",o.style.height=a+"px"),2===r.length&&s&&(r.push(r[0].cloneNode(!0)),A(r[2]),r.push(r[1].cloneNode(!0)),A(r[3]));var t=1===r.length;T=2===r.length,E=new G(r),re(C,0),t||T||re(C.prev,-u),t||re(C.next,u),r.forEach(function(e){e.style.position="absolute",l||(e.style.width=u+"px",e.style.height=a+"px"),e.style.overflow="hidden",T||t||e===C||e===C.prev||e===C.next||ue(e)}),t||(T||s||0!==i||ue(C.prev),T||s||i!==r.length-1||ue(C.next),P(),S(o,Q,X),S(o,U,j),S(o,W,Y),f&&H(function(){n.unobserve=function(e,t){if(!window.IntersectionObserver)return t();var n=new IntersectionObserver(t,$);return n.observe(e),function(){n.unobserve(e)}}(o,function(e){e&&0===e[0].intersectionRatio?k(x=16):R()})}))}}(),{destroy:P,index:function(e){return C.index}}}function X(e){O(),w=x=0;var t=e.touches[0];b=Date.now(),m=D=g=t.pageX,M=t.clientY}function j(e){if(2!==x&&4!==x){var t=e.touches[0],n=t.pageX-D;if(0===x&&2*Math.abs(n)<Math.abs(t.clientY-M))x=4;else{var i=0<n?1:-1;w!==i&&(m=D,b=Date.now(),w=i),x=1,D=t.pageX,ae(h,y+=n),e.preventDefault()}}}function q(){T||ue(C.next),C=C.prev,F()||(re(C.prev,C.x-u),A(C.prev))}function I(){T||ue(C.prev),C=C.next,N()||(re(C.next,C.x+u),A(C.next))}function L(){0===t&&-C.x-y>u/2&&(t=1,I())}function R(){k(),p.auto=setTimeout(function(){t=0,x=8,z(h,y,y-u,ne,L,R)},ie)}function Y(e){if(f&&R(),4!==x){x=2;var t=m<D,n=Date.now()-b<_;if(!F()&&!N()){var i=C.x+y;n?t&&0<i?q():!t&&i<0&&I():v<i?q():i<-v&&I()}var o=-1*C.x,r=Math.min(Math.max(te*Math.abs(o-y)/u,ee),ne);z(h,y,o,n?ee:r)}}function z(i,o,r,u,a,s){var c=Date.now();!function e(){B(a)&&a();var t=Date.now()-c;if(u<=t)return ae(i,r),16!==x&&B(s)&&s(),B(d)&&d(C.index);var n=(r-o)*K(t/u)+o;ae(i,y=n),p.main=H(e)}()}function P(){O(),B(n.unobserve)&&n.unobserve(),V(o,Q,X),V(o,U,j),V(o,W,Y)}}});