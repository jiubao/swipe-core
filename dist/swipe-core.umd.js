!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["swipe-core"]=t()}(this,function(){"use strict";function K(n,t,e){n.addEventListener(t,e,!1)}function t(n,t,e){n.removeEventListener(t,e,!1)}function Q(n){return"function"==typeof n}function U(n,e){var i=this;this.list=[],n.forEach(function(n,t){n.index=Number(e?e[t]:t),i.append(n)})}U.prototype.append=function(n){var t,e=(t=n).next=t.prev=t;return this.list.push(e),this.tail?(e.prev=this.tail,e.next=this.tail.next,(this.tail.next=e).next.prev=e,this.tail=e):this.head=this.tail=e};var n=["webkit","moz","ms","o"],Z=n.reduce(function(n,t){return n||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),$=n.reduce(function(n,t){return n||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!Z||!$){var e=0;Z=function(n){var t=+new Date;return e=Math.max(t,e+16),setTimeout(n,e-t)},$=clearTimeout}var _={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},nn="touchstart",tn="touchmove",en="touchend",rn=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)},on={root:null,rootMargin:"0px",threshold:[0,.01]},un=!!window.IntersectionObserver,an=120,cn=250,sn=1e3,fn=2*sn/3,ln=3e3,dn=function(){var n=!1;function t(){}var e=Object.defineProperty({},"passive",{get:function(){n=!0}});return window.addEventListener("testPassive",t,e),window.removeEventListener("testPassive",t,e),n}(),hn={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[]},pn=document.createElement("div");return pn.style.display="none",document.body.appendChild(pn),function(n){var e=Object.assign({},hn,n),o=e.index,u=e.root,f=e.elms,a=e.width,c=e.height,s=e.cycle,l=(e.expose,e.auto),d=e.css,h=e.ease,r=e.plugins,p=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r.forEach(function(n){return Q(n.init)&&n.init.apply(null,t)})},i=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r.forEach(function(n){return Q(n.start)&&n.start.apply(null,t)})},v=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r.forEach(function(n){return Q(n.end)&&n.end.apply(null,t)})},x=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r.forEach(function(n){return Q(n.endAnimation)&&n.endAnimation.apply(null,t)})};if(u){d&&(a=Number(rn(u,"width").slice(0,-2)),c=Number(rn(u,"height").slice(0,-2)));var m=u.children[0],w={main:-1,auto:-1},g=a/3,y=0,b=0,E=0,M=0,D=0,A=0,C=0,T=0,L=0,N=[],F=!1;l=s&&l;var O=f[o],P=function(n,t){var e,i;i=n.x=t,(e=n)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+i+"px, 0, 0)",function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];r.forEach(function(n){return Q(n.move)&&n.move.apply(null,t)})}(O.index,O,m,f))},j=function(n){return pn.appendChild(n)},k=function(n){return m.appendChild(n)},q=function(n){return!s&&C<T&&O===N.head},R=function(n){return!s&&T<=C&&O===N.tail},X=function(n){return clearTimeout(w.auto)},z=function(n){X(),$(w.main)};return function(){if(0===f.length)return p(-1);u.style.position="relative",d||(u.style.width=a+"px",u.style.height=c+"px");var n=2===f.length&&s;n&&(f.push(f[0].cloneNode(!0)),k(f[2]),f.push(f[1].cloneNode(!0)),k(f[3]));var t=1===f.length;if(F=2===f.length,N=new U(f,n?"0101":null),P(O,0),t||F||P(O.prev,-a),t||P(O.next,a),f.forEach(function(n){n.style.position="absolute",d||(n.style.width=a+"px",n.style.height=c+"px"),F||t||n===O||n===O.prev||n===O.next||j(n)}),t)return p(O.index,O,m,f);if(F||s||0!==o||j(O.prev),F||s||o!==f.length-1||j(O.next),J(),K(u,nn,I),K(u,tn,Y),K(u,en,W),l)if(un)Z(function(){e.unobserve=function(n,t){if(!un)return t();var e=new IntersectionObserver(t,on);return e.observe(n),function(){e.unobserve(n)}}(u,function(n){n&&0===n[0].intersectionRatio?X(y=16):V()})});else{var i=!dn||{capture:!0,passive:!0},r=function(){return(n=u.getBoundingClientRect()).top<window.innerHeight&&0<n.bottom&&n.left<window.innerWidth&&0<n.right?V():X(y=16);var n};"scroll,resize,touchmove".split(",").forEach(function(n){return window.addEventListener(n,(t=r,e=!1,function(){e||(Z(function(){t(),e=!1}),e=!0)}),i);var t,e}),r()}m.x=0,p(O.index,O,m,f)}(),{destroy:J,index:function(n){return O.index}}}function I(n){z(),M=y=0;var t=n.touches[0];A=Date.now(),E=T=C=t.pageX,L=t.clientY,i(O.index,O,m,f)}function Y(n){if(2!==y&&4!==y){var t=n.touches[0],e=t.pageX-T;if(0===y&&2*Math.abs(e)<Math.abs(t.clientY-L))y=4;else{var i=0<e?1:-1;M!==i&&(E=T,A=Date.now(),M=i),y=1,T=t.pageX,P(m,D+=e),n.preventDefault()}}}function B(){F||j(O.next),O=O.prev,q()||(P(O.prev,O.x-a),k(O.prev))}function H(){F||j(O.prev),O=O.next,R()||(P(O.next,O.x+a),k(O.next))}function S(){0===b&&-O.x-D>a/2&&(b=1,H())}function V(t){X(),w.auto=setTimeout(function(){b=0,y=8;var n=t?D:-O.x;G(m,n,n-a,fn,S,V),v(O.next.index,O.next,m,f)},ln)}function W(n){if(4!==y){y=2;var t=E<T,e=Date.now()-A<an;if(!q()&&!R()){var i=O.x+D;e?t&&0<i?B():!t&&i<0&&H():g<i?B():i<-g&&H()}var r=-1*O.x,o=Math.min(Math.max(sn*Math.abs(r-D)/a,cn),fn);G(m,D,r,e?cn:o,null,l?function(){return V(!0)}:null),v(O.index,O,m,f)}}function G(i,r,o,u,a,c){var s=Date.now();!function n(){Q(a)&&a();var t=Date.now()-s;if(u<=t)return P(i,o),16!==y&&Q(c)&&c(),x(O.index,O,m,f);var e=(o-r)*_[h](t/u)+r;P(i,D=e),w.main=Z(n)}()}function J(){z(),Q(e.unobserve)&&e.unobserve(),t(u,nn,I),t(u,tn,Y),t(u,en,W)}}});