!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n["swipe-core"]=e()}(this,function(){"use strict";function Q(n,e,t){n.addEventListener(e,t,!1)}function U(n,e,t){n.removeEventListener(e,t,!1)}function W(n){return"function"==typeof n}function Z(n,t){var i=this;this.list=[],n.forEach(function(n,e){n.index=Number(t?t[e]:e),i.append(n)})}Z.prototype.append=function(n){var e,t=(e=n).next=e.prev=e;return this.list.push(t),this.tail?(t.prev=this.tail,t.next=this.tail.next,(this.tail.next=t).next.prev=t,this.tail=t):this.head=this.tail=t};var n=["webkit","moz","ms","o"],$=n.reduce(function(n,e){return n||window[e+"RequestAnimationFrame"]},window.requestAnimationFrame),_=n.reduce(function(n,e){return n||window[e+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!$||!_){var t=0;$=function(n){var e=+new Date;return t=Math.max(e,t+16),setTimeout(n,t-e)},_=clearTimeout}var nn={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},en="touchstart",tn="touchmove",on="touchend",rn=function(n,e){return window.getComputedStyle(n,null).getPropertyValue(e)},un={root:null,rootMargin:"0px",threshold:[0,.01]},an=120,cn=250,sn=1e3,dn=2*sn/3,fn=3e3,e=function(n){},ln={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",onInit:e,onStart:e,onMove:e,onEnd:e,onEndAnimation:e},hn=document.createElement("div");return hn.style.display="none",document.body.appendChild(hn),function(n){var t=Object.assign({},ln,n),i=t.index,o=t.root,d=t.elms,u=t.width,r=t.height,a=t.cycle,c=t.expose,s=t.auto,f=t.css,l=t.ease,h=t.onInit,p=t.onStart,v=t.onMove,x=t.onEnd,m=t.onEndAnimation;if(o){f&&(u=Number(rn(o,"width").slice(0,-2)),r=Number(rn(o,"height").slice(0,-2)));var w=o.children[0],y={main:-1,auto:-1},b=u/3,g=0,e=0,M=0,E=0,D=0,A=0,T=0,C=0,N=0,F=[],I=!1;s=a&&s;var k=d[i],q=function(n,e){var t,i;i=n.x=e,(t=n)&&(t.style.transition=t.style.webkitTransition="",t.style.transform=t.style.webkitTransform="translate3d("+i+"px, 0, 0)",v(k.index,k,w,d))},O=function(n){return hn.appendChild(n)},S=function(n){return w.appendChild(n)},X=function(n){return!a&&T<C&&k===F.head},j=function(n){return!a&&C<=T&&k===F.tail},L=function(n){return clearTimeout(y.auto)},R=function(n){L(),_(y.main)};return function(){if(0!==d.length){c||(o.style.overflow="hidden"),o.style.position="relative",f||(o.style.width=u+"px",o.style.height=r+"px");var n=2===d.length&&a;n&&(d.push(d[0].cloneNode(!0)),S(d[2]),d.push(d[1].cloneNode(!0)),S(d[3]));var e=1===d.length;I=2===d.length,F=new Z(d,n?"0101":null),q(k,0),e||I||q(k.prev,-u),e||q(k.next,u),d.forEach(function(n){n.style.position="absolute",f||(n.style.width=u+"px",n.style.height=r+"px"),n.style.overflow="hidden",I||e||n===k||n===k.prev||n===k.next||O(n)}),e||(I||a||0!==i||O(k.prev),I||a||i!==d.length-1||O(k.next),K(),Q(o,en,Y),Q(o,tn,z),Q(o,on,H),s&&$(function(){t.unobserve=function(n,e){if(!window.IntersectionObserver)return e();var t=new IntersectionObserver(e,un);return t.observe(n),function(){t.unobserve(n)}}(o,function(n){n&&0===n[0].intersectionRatio?L(g=16):G()})}),w.x=0,h(k.index,k,w,d))}}(),{destroy:K,index:function(n){return k.index}}}function Y(n){R(),E=g=0;var e=n.touches[0];A=Date.now(),M=C=T=e.pageX,N=e.clientY,p(k.index,k,w,d)}function z(n){if(2!==g&&4!==g){var e=n.touches[0],t=e.pageX-C;if(0===g&&2*Math.abs(t)<Math.abs(e.clientY-N))g=4;else{var i=0<t?1:-1;E!==i&&(M=C,A=Date.now(),E=i),g=1,C=e.pageX,q(w,D+=t),n.preventDefault()}}}function P(){I||O(k.next),k=k.prev,X()||(q(k.prev,k.x-u),S(k.prev))}function V(){I||O(k.prev),k=k.next,j()||(q(k.next,k.x+u),S(k.next))}function B(){0===e&&-k.x-D>u/2&&(e=1,V())}function G(){L(),y.auto=setTimeout(function(){e=0,g=8,J(w,D,D-u,dn,B,G),x(k.next.index,k.next,w,d)},fn)}function H(n){if(s&&G(),4!==g){g=2;var e=M<C,t=Date.now()-A<an;if(!X()&&!j()){var i=k.x+D;t?e&&0<i?P():!e&&i<0&&V():b<i?P():i<-b&&V()}var o=-1*k.x,r=Math.min(Math.max(sn*Math.abs(o-D)/u,cn),dn);J(w,D,o,t?cn:r),x(k.index,k,w,d)}}function J(i,o,r,u,a,c){var s=Date.now();!function n(){W(a)&&a();var e=Date.now()-s;if(u<=e)return q(i,r),16!==g&&W(c)&&c(),m(k.index,k,w,d);var t=(r-o)*nn[l](e/u)+o;q(i,D=t),y.main=$(n)}()}function K(){R(),W(t.unobserve)&&t.unobserve(),U(o,en,Y),U(o,tn,z),U(o,on,H)}}});