!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n["swipe-core"]=e()}(this,function(){"use strict";var U=function(n,e,t){n.addEventListener(e,t,!1)},Z=function(n,e,t){n.removeEventListener(e,t,!1)},$=function(n){return"function"==typeof n},_=function(n){var e=n.getBoundingClientRect();return e.top<window.innerHeight&&0<e.bottom&&e.left<window.innerWidth&&0<e.right},nn={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},en="touchstart",tn="touchmove",rn="touchend",on=function(n,e){return window.getComputedStyle(n,null).getPropertyValue(e)},i={root:null,rootMargin:"0px",threshold:[0,.01]},un=!!window.IntersectionObserver,an=function(n,e){if(!un)return e();var t=new IntersectionObserver(e,i);return t.observe(n),function(){t.unobserve(n)}};function sn(n,t){var i=this;this.list=[],n.forEach(function(n,e){n.index=Number(t?t[e]:e),i.append(n)})}sn.prototype.append=function(n){var e,t=(e=n).next=e.prev=e;return this.list.push(t),this.tail?(t.prev=this.tail,t.next=this.tail.next,(this.tail.next=t).next.prev=t,this.tail=t):this.head=this.tail=t};var n=["webkit","moz","ms","o"],cn=n.reduce(function(n,e){return n||window[e+"RequestAnimationFrame"]},window.requestAnimationFrame),fn=n.reduce(function(n,e){return n||window[e+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!cn||!fn){var t=0;cn=function(n){var e=+new Date;return t=Math.max(e,t+16),setTimeout(n,t-e)},fn=clearTimeout}var ln=function(n){var e=!1;return function(){e||(cn(function(){n(),e=!1}),e=!0)}},dn=120,hn=250,vn=1e3,pn=2*vn/3,xn=3e3,mn=function(n){var e=!1;function t(){}var i=Object.defineProperty({},"passive",{get:function(){e=!0}});return window.addEventListener("testPassive",t,i),window.removeEventListener("testPassive",t,i),e}(),wn="scroll,resize,touchmove",bn={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[],initHandlers:[],startHandlers:[],moveHandlers:[],endHandlers:[],endAnimationHandlers:[]},yn=document.createElement("div");return yn.style.display="none",document.body.appendChild(yn),function(n){var r=Object.assign({},bn,n),o=r.index,u=r.root,f=r.elms,a=r.width,s=r.height,c=r.cycle,l=(r.expose,r.auto),d=r.css,h=r.ease;r.plugins.forEach(function(e){return Object.keys(e).forEach(function(n){return r[n+"Handlers"].push(e[n])})});var e=function(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return r[t+"Handlers"].forEach(function(n){return n.apply(null,e)})}},v=e("init"),t=e("start"),p=e("move"),x=e("end"),m=e("endAnimation");if(u){d&&(a=Number(on(u,"width").slice(0,-2)),s=Number(on(u,"height").slice(0,-2)));var w=u.children[0],b={main:-1,auto:-1},y=a/3,g=0,i=0,E=0,M=0,H=0,D=0,A=0,C=0,O=0,T=[],L=!1;l=c&&l;var N=f[o],j=function(n,e){var t,i;n.x=e,i=e,(t=n)&&(t.style.transition=t.style.webkitTransition="",t.style.transform=t.style.webkitTransform="translate3d("+i+"px, 0, 0)",p(N.index,N,w,f))},k=function(n){return yn.appendChild(n)},F=function(n){return w.appendChild(n)},P=function(n){return!c&&A<C&&N===T.head},q=function(n){return!c&&C<=A&&N===T.tail},R=function(n){return clearTimeout(b.auto)},X=function(n){R(),fn(b.main)};return function(){if(0===f.length)return v(-1);u.style.position="relative",d||(u.style.width=a+"px",u.style.height=s+"px");var n=2===f.length&&c;n&&(f.push(f[0].cloneNode(!0)),F(f[2]),f.push(f[1].cloneNode(!0)),F(f[3]));var e=1===f.length;if(L=2===f.length,T=new sn(f,n?"0101":null),j(N,0),e||L||j(N.prev,-a),e||j(N.next,a),f.forEach(function(n){n.style.position="absolute",d||(n.style.width=a+"px",n.style.height=s+"px"),L||e||n===N||n===N.prev||n===N.next||k(n)}),e)return v(N.index,N,w,f);if(L||c||0!==o||k(N.prev),L||c||o!==f.length-1||k(N.next),Q(),U(u,en,z),U(u,tn,I),U(u,rn,J),l)if(un)cn(function(){r.unobserve=an(u,function(n){n&&0===n[0].intersectionRatio?R(g=16):G()})});else{var t=!mn||{capture:!0,passive:!0},i=function(){return _(u)?G():R(g=16)};wn.split(",").forEach(function(n){return window.addEventListener(n,ln(i),t)}),i()}w.x=0,v(N.index,N,w,f)}(),{destroy:Q,index:function(n){return N.index},on:function(n,e){var t=r[n+"Handlers"];return t.push(e),function(){return t.splice(t.indexOf(e),1)}}}}function z(n){X(),M=g=0;var e=n.touches[0];D=Date.now(),E=C=A=e.pageX,O=e.clientY,t(N.index,N,w,f)}function I(n){if(2!==g&&4!==g){var e=n.touches[0],t=e.pageX-C;if(0===g&&2*Math.abs(t)<Math.abs(e.clientY-O))g=4;else{var i=0<t?1:-1;M!==i&&(E=C,D=Date.now(),M=i),g=1,C=e.pageX,j(w,H+=t),n.preventDefault()}}}function Y(){L||k(N.next),N=N.prev,P()||(j(N.prev,N.x-a),F(N.prev))}function B(){L||k(N.prev),N=N.next,q()||(j(N.next,N.x+a),F(N.next))}function S(){0===i&&-N.x-H>a/2&&(i=1,B())}function V(){R(),b.auto=setTimeout(function(){W()},xn)}function W(){i=0,g=8,K(w,H,-N.x-a,pn,S,V),x(N.next.index,N.next,w,f)}function G(n){3<Math.abs(H+N.x)?W():V()}function J(n){if(4!==g){g=2;var e=E<C,t=Date.now()-D<dn;if(!P()&&!q()){var i=N.x+H;t?e&&0<i?Y():!e&&i<0&&B():y<i?Y():i<-y&&B()}var r=-1*N.x,o=Math.min(Math.max(vn*Math.abs(r-H)/a,hn),pn);K(w,H,r,t?hn:o,null,l?function(){return G()}:null),x(N.index,N,w,f)}}function K(i,r,o,u,a,s){var c=Date.now();!function n(){$(a)&&a();var e=Date.now()-c;if(u<=e)return j(i,o),16!==g&&$(s)&&s(),m(N.index,N,w,f);var t=(o-r)*nn[h](e/u)+r;j(i,H=t),b.main=cn(n)}()}function Q(){X(),$(r.unobserve)&&r.unobserve(),Z(u,en,z),Z(u,tn,I),Z(u,rn,J)}}});