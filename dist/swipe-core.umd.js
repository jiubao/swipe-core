!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n["swipe-core"]=e()}(this,function(){"use strict";function K(n,e,t){n.addEventListener(e,t,!1)}function Q(n,e,t){n.removeEventListener(e,t,!1)}function U(n){return"function"==typeof n}function W(n,t){var i=this;this.list=[],n.forEach(function(n,e){n.index=Number(t?t[e]:e),i.append(n)})}W.prototype.append=function(n){var e,t=(e=n).next=e.prev=e;return this.list.push(t),this.tail?(t.prev=this.tail,t.next=this.tail.next,(this.tail.next=t).next.prev=t,this.tail=t):this.head=this.tail=t};var n=["webkit","moz","ms","o"],Z=n.reduce(function(n,e){return n||window[e+"RequestAnimationFrame"]},window.requestAnimationFrame),$=n.reduce(function(n,e){return n||window[e+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!Z||!$){var t=0;Z=function(n){var e=+new Date;return t=Math.max(e,t+16),setTimeout(n,t-e)},$=clearTimeout}var _={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},nn="touchstart",en="touchmove",tn="touchend",rn=function(n,e){return window.getComputedStyle(n,null).getPropertyValue(e)},on={root:null,rootMargin:"0px",threshold:[0,.01]},un=120,an=250,cn=1e3,ln=2*cn/3,sn=3e3,fn={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[]},hn=document.createElement("div");return hn.style.display="none",document.body.appendChild(hn),function(n){var t=Object.assign({},fn,n),i=t.index,r=t.root,s=t.elms,u=t.width,o=t.height,a=t.cycle,c=t.expose,l=t.auto,f=t.css,h=t.ease,d=t.plugins,p=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return d.forEach(function(n){return U(n.start)&&n.start.apply(null,e)})},v=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return d.forEach(function(n){return U(n.end)&&n.end.apply(null,e)})},x=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return d.forEach(function(n){return U(n.endAnimation)&&n.endAnimation.apply(null,e)})};if(r){f&&(u=Number(rn(r,"width").slice(0,-2)),o=Number(rn(r,"height").slice(0,-2)));var m=r.children[0],w={main:-1,auto:-1},y=u/3,g=0,e=0,b=0,E=0,M=0,D=0,A=0,T=0,C=0,N=[],F=!1;l=a&&l;var k=s[i],q=function(n,e){var t,i;i=n.x=e,(t=n)&&(t.style.transition=t.style.webkitTransition="",t.style.transform=t.style.webkitTransform="translate3d("+i+"px, 0, 0)",function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];d.forEach(function(n){return U(n.move)&&n.move.apply(null,e)})}(k.index,k,m,s))},O=function(n){return hn.appendChild(n)},X=function(n){return m.appendChild(n)},j=function(n){return!a&&A<T&&k===N.head},I=function(n){return!a&&T<=A&&k===N.tail},L=function(n){return clearTimeout(w.auto)},R=function(n){L(),$(w.main)};return function(){if(0!==s.length){c||(r.style.overflow="hidden"),r.style.position="relative",f||(r.style.width=u+"px",r.style.height=o+"px");var n=2===s.length&&a;n&&(s.push(s[0].cloneNode(!0)),X(s[2]),s.push(s[1].cloneNode(!0)),X(s[3]));var e=1===s.length;F=2===s.length,N=new W(s,n?"0101":null),q(k,0),e||F||q(k.prev,-u),e||q(k.next,u),s.forEach(function(n){n.style.position="absolute",f||(n.style.width=u+"px",n.style.height=o+"px"),n.style.overflow="hidden",F||e||n===k||n===k.prev||n===k.next||O(n)}),e||(F||a||0!==i||O(k.prev),F||a||i!==s.length-1||O(k.next),J(),K(r,nn,Y),K(r,en,z),K(r,tn,G),l&&Z(function(){t.unobserve=function(n,e){if(!window.IntersectionObserver)return e();var t=new IntersectionObserver(e,on);return t.observe(n),function(){t.unobserve(n)}}(r,function(n){n&&0===n[0].intersectionRatio?L(g=16):B()})}),m.x=0,function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];d.forEach(function(n){return U(n.init)&&n.init.apply(null,e)})}(k.index,k,m,s))}}(),{destroy:J,index:function(n){return k.index}}}function Y(n){R(),E=g=0;var e=n.touches[0];D=Date.now(),b=T=A=e.pageX,C=e.clientY,p(k.index,k,m,s)}function z(n){if(2!==g&&4!==g){var e=n.touches[0],t=e.pageX-T;if(0===g&&2*Math.abs(t)<Math.abs(e.clientY-C))g=4;else{var i=0<t?1:-1;E!==i&&(b=T,D=Date.now(),E=i),g=1,T=e.pageX,q(m,M+=t),n.preventDefault()}}}function P(){F||O(k.next),k=k.prev,j()||(q(k.prev,k.x-u),X(k.prev))}function S(){F||O(k.prev),k=k.next,I()||(q(k.next,k.x+u),X(k.next))}function V(){0===e&&-k.x-M>u/2&&(e=1,S())}function B(){L(),w.auto=setTimeout(function(){e=0,g=8,H(m,M,M-u,ln,V,B),v(k.next.index,k.next,m,s)},sn)}function G(n){if(l&&B(),4!==g){g=2;var e=b<T,t=Date.now()-D<un;if(!j()&&!I()){var i=k.x+M;t?e&&0<i?P():!e&&i<0&&S():y<i?P():i<-y&&S()}var r=-1*k.x,o=Math.min(Math.max(cn*Math.abs(r-M)/u,an),ln);H(m,M,r,t?an:o),v(k.index,k,m,s)}}function H(i,r,o,u,a,c){var l=Date.now();!function n(){U(a)&&a();var e=Date.now()-l;if(u<=e)return q(i,o),16!==g&&U(c)&&c(),x(k.index,k,m,s);var t=(o-r)*_[h](e/u)+r;q(i,M=t),w.main=Z(n)}()}function J(){R(),U(t.unobserve)&&t.unobserve(),Q(r,nn,Y),Q(r,en,z),Q(r,tn,G)}}});