!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["swipe-core"]=t()}(this,function(){"use strict";var r=!!function(n){var t=!1;function e(){}var i=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("testPassive",e,i),window.removeEventListener("testPassive",e,i),t}()&&{capture:!1,passive:!0},Z=function(n,t,e,i){void 0===i&&(i=r),n.addEventListener(t,e,i)},_=function(n,t,e,i){void 0===i&&(i=r),n.removeEventListener(t,e,i)},nn=function(n){return"function"==typeof n},tn=function(n){var t=n.getBoundingClientRect();return t.top<window.innerHeight&&0<t.bottom&&t.left<window.innerWidth&&0<t.right},en={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},rn="touchstart",on="touchmove",un="touchend",an=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)};function sn(){this.value=0}sn.prototype={is:function(n){return this.value&n},or:function(n){return this.value=this.value|n,this},rm:function(n){return this.value=this.value&~n,this},set:function(n){return this.value=n,this}};var cn={root:null,rootMargin:"0px",threshold:[0,.01]},dn=!!window.IntersectionObserver;function ln(n){var t=this;n.forEach(function(n){return t.append(n)})}ln.prototype.append=function(n){var t=n.$next=n.$prev=n;return this.$tail?(t.$prev=this.$tail,t.$next=this.$tail.$next,(this.$tail.$next=t).$next.$prev=t,this.$tail=t):this.$head=this.$tail=t};var n=["webkit","moz","ms","o"],fn=n.reduce(function(n,t){return n||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame).bind(window),hn=n.reduce(function(n,t){return n||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame).bind(window);if(!fn||!hn){var e=0;fn=function(n){var t=+new Date;return e=Math.max(t,e+16),setTimeout(n,e-t)},hn=clearTimeout}var vn=120,pn=250,mn=1e3,wn=2*mn/3,xn=3e3,$n={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[],initHandlers:[],startHandlers:[],moveHandlers:[],endHandlers:[],animationEndHandlers:[]},bn=document.createElement("div");return bn.style.display="none",document.body.appendChild(bn),function(n){var u=Object.assign({},$n,n),a=u.index,s=u.root,d=u.elms,c=u.width,l=u.height,f=u.cycle,h=(u.expose,u.auto),v=u.css,p=u.ease;u.plugins.forEach(function(t){return Object.keys(t).forEach(function(n){return u[n+"Handlers"].push(t[n])})});var t=function(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return u[e+"Handlers"].forEach(function(n){return n.apply(null,t)})}},m=t("init"),e=t("start"),r=t("move"),w=t("end");if(s){v&&(c=Number(an(s,"width").slice(0,-2)),l=Number(an(s,"height").slice(0,-2)));var x=s.children[0],$={main:-1,auto:-1},b=c/3,g={idle:0,start:1,drag:2,animate:4,scroll:8,auto:16,cancel:32},y=new sn,i=0,E=0,o=0,H=0,M=0,C=0,D=0,O=0,T=[],k=!1;h=f&&h;var L=d[a],j=function(n,t){var e,i;i=n.x=t,(e=n)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+i+"px, 0, 0)",r(L.$index,L,x,d))},A=function(n){return bn.appendChild(n)},F=function(n){return x.appendChild(n)},N=function(n){return!f&&C<D&&L===T.$head},P=function(n){return!f&&D<=C&&L===T.$tail},q=function(n){return clearTimeout($.auto)},R=function(n){return q(y.set(g.cancel))},X=function(n){q(),hn($.main)},z=!0;return function(){if(0===d.length)return m(-1);s.style.position="relative",v||(s.style.width=c+"px",s.style.height=l+"px");var n=2===d.length&&f;n&&(d.push(d[0].cloneNode(!0)),F(d[2]),d.push(d[1].cloneNode(!0)),F(d[3]),d[0].$index=d[2].$index=0,d[1].$index=d[3].$index=1);var t=1===d.length;if(k=2===d.length,T=new ln(d),n||d.forEach(function(n,t){return n.$index=t}),j(L,0),t||k||j(L.$prev,-c),t||j(L.$next,c),d.forEach(function(n){n.style.position="absolute",v||(n.style.width=c+"px",n.style.height=l+"px"),k||t||n===L||n===L.$prev||n===L.$next||A(n)}),t)return m(L.$index,L,x,d);if(k||f||0!==a||A(L.$prev),k||f||a!==d.length-1||A(L.$next),U(),Z(s,rn,I),Z(s,on,Y),Z(s,un,K),h){if(dn)fn(function(){u.unobserve=function(n,t){if(!dn)return t();var e=new IntersectionObserver(t,cn);return e.observe(n),function(){e.unobserve(n)}}(s,function(n){n&&0===n[0].intersectionRatio?R():J()})});else{var e=function(){return tn(s)?W():R()};Z(window,"touchmove",function(){return tn(s)||R()}),Z(window,"touchend",e),e()}var i=["webkit","moz","ms","-"].reduce(function(n,t){return void 0!==document[n[0]]?n:[t+"Hidden",t+"visibilitychange"]},["hidden","visibilitychange"]),r=i[0],o=i[1];"-"!==r[0]&&document.addEventListener(o,function(){return document[r]?R():W()},!1)}x.x=0,m(L.$index,L,x,d)}(),{destroy:U,index:function(n){return L.$index},on:function(n,t){var e=u[n+"Handlers"];return e.push(t),function(){return e.splice(e.indexOf(t),1)}},stop:function(){return z=!1},start:function(){return z=!0}}}function I(n){if(z){X(),y.or(g.start).rm(g.scroll),o=0;var t=n.touches[0];M=Date.now(),E=D=C=t.pageX,O=t.clientY,e(L.$index,L,x,d)}}function Y(n){if(z&&!y.is(g.scroll)){var t=n.touches[0],e=t.pageX-D;if(y.is(g.start)&&2*Math.abs(e)<Math.abs(t.clientY-O))y.or(g.scroll).rm(g.start);else{var i=0<e?1:-1;o!==i&&(E=D,M=Date.now(),o=i),y.set(g.drag),D=t.pageX,j(x,H+=e)}}}function B(){k||A(L.$next),L=L.$prev,N()||(j(L.$prev,L.x-c),F(L.$prev))}function S(){k||A(L.$prev),L=L.$next,P()||(j(L.$next,L.x+c),F(L.$next))}function V(){0===i&&-L.x-H>c/2&&(i=1,S())}function W(){q(),$.auto=setTimeout(function(){z&&G()},xn)}function G(){i=0,y.set(g.auto),e(L.$index,L,x,d),Q(x,H,-L.x-c,wn,V,W)}function J(){3<Math.abs(H+L.x)?G():W()}function K(n){if(z){if(y.is(g.scroll)&&!y.is(g.animate)&&!y.is(g.auto))return h&&J();y.set(g.animate);var t=E<D,e=Date.now()-M<vn;if(!N()&&!P()){var i=L.x+H;e?t&&0<i?B():!t&&i<0&&S():b<i?B():i<-b&&S()}var r=-1*L.x,o=Math.min(Math.max(mn*Math.abs(r-H)/c,pn),wn);Q(x,H,r,e?pn:o,null,h?function(){return J()}:null)}}function Q(i,r,o,u,a,s){var c=Date.now();!function n(){var t=Date.now()-c;if(u<=t&&(H=o),nn(a)&&a(),u<=t)return j(i,o),!y.is(g.cancel)&&nn(s)&&s(),y.set(g.idle),w(L.$index,L,x,d);var e=(o-r)*en[p](t/u)+r;j(i,H=e),$.main=fn(n)}()}function U(){X(),nn(u.unobserve)&&u.unobserve(),_(s,rn,I),_(s,on,Y),_(s,un,K)}}});