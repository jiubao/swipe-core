!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n["swipe-core"]=e()}(this,function(){"use strict";var Z=function(n,e,t){n.addEventListener(e,t,!1)},_=function(n,e,t){n.removeEventListener(e,t,!1)},nn=function(n){return"function"==typeof n},en=function(n){var e=n.getBoundingClientRect();return e.top<window.innerHeight&&0<e.bottom&&e.left<window.innerWidth&&0<e.right},tn={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},rn="touchstart",on="touchmove",un="touchend",an=function(n,e){return window.getComputedStyle(n,null).getPropertyValue(e)};function sn(){this.value=0}sn.prototype={is:function(n){return this.value&n},or:function(n){return this.value=this.value|n,this},rm:function(n){return this.value=this.value&~n,this},set:function(n){return this.value=n,this}};var cn={root:null,rootMargin:"0px",threshold:[0,.01]},dn=!!window.IntersectionObserver;function ln(n){var e=this;n.forEach(function(n){return e.append(n)})}ln.prototype.append=function(n){var e=n.$next=n.$prev=n;return this.$tail?(e.$prev=this.$tail,e.$next=this.$tail.$next,(this.$tail.$next=e).$next.$prev=e,this.$tail=e):this.$head=this.$tail=e};var n=["webkit","moz","ms","o"],fn=n.reduce(function(n,e){return n||window[e+"RequestAnimationFrame"]},window.requestAnimationFrame).bind(window),hn=n.reduce(function(n,e){return n||window[e+"CancelAnimationFrame"]},window.cancelAnimationFrame).bind(window);if(!fn||!hn){var t=0;fn=function(n){var e=+new Date;return t=Math.max(e,t+16),setTimeout(n,t-e)},hn=clearTimeout}var vn=120,pn=250,mn=1e3,xn=2*mn/3,wn=3e3,$n=(function(n){function e(){}var t=Object.defineProperty({},"passive",{get:function(){!0}});window.addEventListener("testPassive",e,t),window.removeEventListener("testPassive",e,t)}(),{auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[],initHandlers:[],startHandlers:[],moveHandlers:[],endHandlers:[],animationEndHandlers:[]}),bn=document.createElement("div");return bn.style.display="none",document.body.appendChild(bn),function(n){var r=Object.assign({},$n,n),o=r.index,u=r.root,d=r.elms,a=r.width,s=r.height,c=r.cycle,l=(r.expose,r.auto),f=r.css,h=r.ease;r.plugins.forEach(function(e){return Object.keys(e).forEach(function(n){return r[n+"Handlers"].push(e[n])})});var e=function(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return r[t+"Handlers"].forEach(function(n){return n.apply(null,e)})}},v=e("init"),t=e("start"),p=e("move"),m=e("end"),x=e("animationEnd");if(u){f&&(a=Number(an(u,"width").slice(0,-2)),s=Number(an(u,"height").slice(0,-2)));var w=u.children[0],$={main:-1,auto:-1},b=a/3,g={idle:0,start:1,drag:2,animate:4,scroll:8,auto:16,cancel:32},y=new sn,i=0,E=0,H=0,M=0,D=0,C=0,O=0,T=0,k=[],L=!1;l=c&&l;var j=d[o],A=function(n,e){var t,i;i=n.x=e,(t=n)&&(t.style.transition=t.style.webkitTransition="",t.style.transform=t.style.webkitTransform="translate3d("+i+"px, 0, 0)",p(j.$index,j,w,d))},F=function(n){return bn.appendChild(n)},N=function(n){return w.appendChild(n)},P=function(n){return!c&&C<O&&j===k.$head},q=function(n){return!c&&O<=C&&j===k.$tail},R=function(n){return clearTimeout($.auto)},X=function(n){return R(y.set(g.cancel))},z=function(n){R(),hn($.main)};return function(){if(0===d.length)return v(-1);u.style.position="relative",f||(u.style.width=a+"px",u.style.height=s+"px");var n=2===d.length&&c;n&&(d.push(d[0].cloneNode(!0)),N(d[2]),d.push(d[1].cloneNode(!0)),N(d[3]),d[0].$index=d[2].$index=0,d[1].$index=d[3].$index=1);var e=1===d.length;if(L=2===d.length,k=new ln(d),n||d.forEach(function(n,e){return n.$index=e}),A(j,0),e||L||A(j.$prev,-a),e||A(j.$next,a),d.forEach(function(n){n.style.position="absolute",f||(n.style.width=a+"px",n.style.height=s+"px"),L||e||n===j||n===j.$prev||n===j.$next||F(n)}),e)return v(j.$index,j,w,d);if(L||c||0!==o||F(j.$prev),L||c||o!==d.length-1||F(j.$next),U(),Z(u,rn,I),Z(u,on,Y),Z(u,un,K),l){if(dn)fn(function(){r.unobserve=function(n,e){if(!dn)return e();var t=new IntersectionObserver(e,cn);return t.observe(n),function(){t.unobserve(n)}}(u,function(n){n&&0===n[0].intersectionRatio?X():J()})});else{var t=function(){return en(u)?W():X()};Z(window,"touchmove",function(){return en(u)||X()}),Z(window,"touchend",t),t()}var i=["ms","moz","webkit"].reduce(function(n,e){return void 0!==document[n[0]]?n:[e+"Hidden",e+"visibilitychange"]},["hidden","visibilitychange"]);document.addEventListener(i[1],function(){return document[i[0]]?X():W()},!1)}w.x=0,v(j.$index,j,w,d)}(),{destroy:U,index:function(n){return j.$index},on:function(n,e){var t=r[n+"Handlers"];return t.push(e),function(){return t.splice(t.indexOf(e),1)}}}}function I(n){z(),y.or(g.start).rm(g.scroll),H=0;var e=n.touches[0];D=Date.now(),E=O=C=e.pageX,T=e.clientY,t(j.$index,j,w,d)}function Y(n){if(!y.is(g.scroll)){var e=n.touches[0],t=e.pageX-O;if(y.is(g.start)&&2*Math.abs(t)<Math.abs(e.clientY-T))y.or(g.scroll).rm(g.start);else{var i=0<t?1:-1;H!==i&&(E=O,D=Date.now(),H=i),y.set(g.drag),O=e.pageX,A(w,M+=t),n.preventDefault()}}}function B(){L||F(j.$next),j=j.$prev,P()||(A(j.$prev,j.x-a),N(j.$prev))}function S(){L||F(j.$prev),j=j.$next,q()||(A(j.$next,j.x+a),N(j.$next))}function V(){0===i&&-j.x-M>a/2&&(i=1,S())}function W(){R(),$.auto=setTimeout(function(){G()},wn)}function G(){i=0,y.set(g.auto),Q(w,M,-j.x-a,xn,V,W),m(j.$next.$index,j.$next,w,d)}function J(){3<Math.abs(M+j.x)?G():W()}function K(n){if(y.is(g.scroll)&&!y.is(g.animate)&&!y.is(g.auto))return l&&J();y.set(g.animate);var e=E<O,t=Date.now()-D<vn;if(!P()&&!q()){var i=j.x+M;t?e&&0<i?B():!e&&i<0&&S():b<i?B():i<-b&&S()}var r=-1*j.x,o=Math.min(Math.max(mn*Math.abs(r-M)/a,pn),xn);Q(w,M,r,t?pn:o,null,l?function(){return J()}:null),m(j.$index,j,w,d)}function Q(i,r,o,u,a,s){var c=Date.now();!function n(){var e=Date.now()-c;if(u<=e&&(M=o),nn(a)&&a(),u<=e)return A(i,o),!y.is(g.cancel)&&nn(s)&&s(),y.set(g.idle),x(j.$index,j,w,d);var t=(o-r)*tn[h](e/u)+r;A(i,M=t),$.main=fn(n)}()}function U(){z(),nn(r.unobserve)&&r.unobserve(),_(u,rn,I),_(u,on,Y),_(u,un,K)}}});