!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["swipe-core"]=t()}(this,function(){"use strict";function J(n,t,e){n.addEventListener(t,e,!1)}function K(n,t,e){n.removeEventListener(t,e,!1)}function Q(n){return"function"==typeof n}function U(n,e){var i=this;this.list=[],n.forEach(function(n,t){n.index=Number(e?e[t]:t),i.append(n)})}U.prototype.append=function(n){var t,e=(t=n).next=t.prev=t;return this.list.push(e),this.tail?(e.prev=this.tail,e.next=this.tail.next,(this.tail.next=e).next.prev=e,this.tail=e):this.head=this.tail=e};var n=["webkit","moz","ms","o"],W=n.reduce(function(n,t){return n||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),Z=n.reduce(function(n,t){return n||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!W||!Z){var e=0;W=function(n){var t=+new Date;return e=Math.max(t,e+16),setTimeout(n,e-t)},Z=clearTimeout}var $={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},_="touchstart",nn="touchmove",tn="touchend",en=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)},rn={root:null,rootMargin:"0px",threshold:[0,.01]},on=120,un=250,an=1e3,cn=2*an/3,sn=3e3,ln={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[]},fn=document.createElement("div");return fn.style.display="none",document.body.appendChild(fn),function(n){var e=Object.assign({},ln,n),i=e.index,r=e.root,l=e.elms,u=e.width,o=e.height,a=e.cycle,c=(e.expose,e.auto),s=e.css,f=e.ease,h=e.plugins,d=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return h.forEach(function(n){return Q(n.start)&&n.start.apply(null,t)})},p=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return h.forEach(function(n){return Q(n.end)&&n.end.apply(null,t)})},v=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return h.forEach(function(n){return Q(n.endAnimation)&&n.endAnimation.apply(null,t)})};if(r){s&&(u=Number(en(r,"width").slice(0,-2)),o=Number(en(r,"height").slice(0,-2)));var x=r.children[0],m={main:-1,auto:-1},w=u/3,y=0,t=0,g=0,b=0,E=0,M=0,D=0,A=0,T=0,C=[],N=!1;c=a&&c;var F=l[i],k=function(n,t){var e,i;i=n.x=t,(e=n)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+i+"px, 0, 0)",function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];h.forEach(function(n){return Q(n.move)&&n.move.apply(null,t)})}(F.index,F,x,l))},q=function(n){return fn.appendChild(n)},O=function(n){return x.appendChild(n)},X=function(n){return!a&&D<A&&F===C.head},j=function(n){return!a&&A<=D&&F===C.tail},I=function(n){return clearTimeout(m.auto)},L=function(n){I(),Z(m.main)};return function(){if(0!==l.length){r.style.position="relative",s||(r.style.width=u+"px",r.style.height=o+"px");var n=2===l.length&&a;n&&(l.push(l[0].cloneNode(!0)),O(l[2]),l.push(l[1].cloneNode(!0)),O(l[3]));var t=1===l.length;N=2===l.length,C=new U(l,n?"0101":null),k(F,0),t||N||k(F.prev,-u),t||k(F.next,u),l.forEach(function(n){n.style.position="absolute",s||(n.style.width=u+"px",n.style.height=o+"px"),N||t||n===F||n===F.prev||n===F.next||q(n)}),t||(N||a||0!==i||q(F.prev),N||a||i!==l.length-1||q(F.next),H(),J(r,_,R),J(r,nn,Y),J(r,tn,B),c&&W(function(){e.unobserve=function(n,t){if(!window.IntersectionObserver)return t();var e=new IntersectionObserver(t,rn);return e.observe(n),function(){e.unobserve(n)}}(r,function(n){n&&0===n[0].intersectionRatio?I(y=16):V()})}),x.x=0,function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];h.forEach(function(n){return Q(n.init)&&n.init.apply(null,t)})}(F.index,F,x,l))}}(),{destroy:H,index:function(n){return F.index}}}function R(n){L(),b=y=0;var t=n.touches[0];M=Date.now(),g=A=D=t.pageX,T=t.clientY,d(F.index,F,x,l)}function Y(n){if(2!==y&&4!==y){var t=n.touches[0],e=t.pageX-A;if(0===y&&2*Math.abs(e)<Math.abs(t.clientY-T))y=4;else{var i=0<e?1:-1;b!==i&&(g=A,M=Date.now(),b=i),y=1,A=t.pageX,k(x,E+=e),n.preventDefault()}}}function z(){N||q(F.next),F=F.prev,X()||(k(F.prev,F.x-u),O(F.prev))}function P(){N||q(F.prev),F=F.next,j()||(k(F.next,F.x+u),O(F.next))}function S(){0===t&&-F.x-E>u/2&&(t=1,P())}function V(){I(),m.auto=setTimeout(function(){t=0,y=8,G(x,E,E-u,cn,S,V),p(F.next.index,F.next,x,l)},sn)}function B(n){if(c&&V(),4!==y){y=2;var t=g<A,e=Date.now()-M<on;if(!X()&&!j()){var i=F.x+E;e?t&&0<i?z():!t&&i<0&&P():w<i?z():i<-w&&P()}var r=-1*F.x,o=Math.min(Math.max(an*Math.abs(r-E)/u,un),cn);G(x,E,r,e?un:o),p(F.index,F,x,l)}}function G(i,r,o,u,a,c){var s=Date.now();!function n(){Q(a)&&a();var t=Date.now()-s;if(u<=t)return k(i,o),16!==y&&Q(c)&&c(),v(F.index,F,x,l);var e=(o-r)*$[f](t/u)+r;k(i,E=e),m.main=W(n)}()}function H(){L(),Q(e.unobserve)&&e.unobserve(),K(r,_,R),K(r,nn,Y),K(r,tn,B)}}});