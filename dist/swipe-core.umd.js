!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["swipe-core"]=t()}(this,function(){"use strict";var _=!!function(n){var t=!1;function e(){}var i=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("testPassive",e,i),window.removeEventListener("testPassive",e,i),t}()&&{capture:!1,passive:!0},nn=function(n,t,e,i){void 0===i&&(i=_),n.removeEventListener(t,e,i)},tn=function(n){return"function"==typeof n},en=function(n){var t=n.getBoundingClientRect();return t.top<window.innerHeight&&0<t.bottom&&t.left<window.innerWidth&&0<t.right},rn={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},on=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)};function un(){this.value=0}un.prototype={is:function(n){return this.value&n},or:function(n){return this.value=this.value|n,this},rm:function(n){return this.value=this.value&~n,this},set:function(n){return this.value=n,this}};var an={root:null,rootMargin:"0px",threshold:[0,.01]},cn=!!window.IntersectionObserver;function sn(n){var t=this;n.forEach(function(n){return t.append(n)})}sn.prototype.append=function(n){var t=n.$next=n.$prev=n;return this.$tail?(t.$prev=this.$tail,t.$next=this.$tail.$next,(this.$tail.$next=t).$next.$prev=t,this.$tail=t):this.$head=this.$tail=t};var n=["webkit","moz","ms","o"],ln=n.reduce(function(n,t){return n||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame).bind(window),dn=n.reduce(function(n,t){return n||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame).bind(window);if(!ln||!dn){var e=0;ln=function(n){var t=+new Date;return e=Math.max(t,e+16),setTimeout(n,e-t)},dn=clearTimeout}var fn=120,hn=250,vn=1e3,pn=2*vn/3,mn=3e3,wn={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[],initHandlers:[],startHandlers:[],moveHandlers:[],endHandlers:[],animationEndHandlers:[]},xn=document.createElement("div");return xn.style.display="none",document.body.appendChild(xn),function(n){var o=Object.assign({},wn,n),u=o.index,a=o.root,l=o.elms,c=o.width,s=o.height,d=o.cycle,f=(o.expose,o.auto),h=o.css,v=o.ease;o.plugins.forEach(function(t){return Object.keys(t).forEach(function(n){return o[n+"Handlers"].push(t[n])})});var t=function(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return o[e+"Handlers"].forEach(function(n){return n.apply(null,t)})}},p=t("init"),e=t("start"),r=t("move"),m=t("end");if(a){h&&(c=Number(on(a,"width").slice(0,-2)),s=Number(on(a,"height").slice(0,-2)));var w=a.children[0],x={main:-1,auto:-1},$=c/3,b={idle:0,start:1,drag:2,animate:4,scroll:8,auto:16,cancel:32},y=new un,i=0,g=0,E=0,H=0,M=0,C=0,D=0,O=0,T=[],k=!1;f=d&&f;var j=l[u],A=function(n,t){var e,i;i=n.x=t,(e=n)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+i+"px, 0, 0)",r(j.$index,j,w,l))},F=function(n){return xn.appendChild(n)},L=function(n){return w.appendChild(n)},N=function(n){return!d&&C<D&&j===T.$head},P=function(n){return!d&&D<=C&&j===T.$tail},q=function(n){return clearTimeout(x.auto)},R=function(n){return q(y.set(b.cancel))},X=function(n){q(),dn(x.main)},z=!0,I=[],Y=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return I.push(function(n,t,e,i){return void 0===i&&(i=_),n.addEventListener(t,e,i),function(){return nn(n,t,e,i)}}.apply(null,n))};return function(){if(0===l.length)return p(-1);a.style.position="relative",h||(a.style.width=c+"px",a.style.height=s+"px");var n=2===l.length&&d;n&&(l.push(l[0].cloneNode(!0)),L(l[2]),l.push(l[1].cloneNode(!0)),L(l[3]),l[0].$index=l[2].$index=0,l[1].$index=l[3].$index=1);var t=1===l.length;if(k=2===l.length,T=new sn(l),n||l.forEach(function(n,t){return n.$index=t}),A(j,0),t||k||A(j.$prev,-c),t||A(j.$next,c),l.forEach(function(n){n.style.position="absolute",h||(n.style.width=c+"px",n.style.height=s+"px"),k||t||n===j||n===j.$prev||n===j.$next||F(n)}),t)return p(j.$index,j,w,l);if(k||d||0!==u||F(j.$prev),k||d||u!==l.length-1||F(j.$next),Y(a,"touchstart",B),Y(a,"touchmove",S),Y(a,"touchend",U),f){if(cn)ln(function(){o.unobserve=function(n,t){if(!cn)return t();var e=new IntersectionObserver(t,an);return e.observe(n),function(){e.unobserve(n)}}(a,function(n){n&&0===n[0].intersectionRatio?R():Q()})});else{var e=function(){return en(a)?J():R()};Y(window,"touchmove",function(){return en(a)||R()}),Y(window,"touchend",e),e()}var i=["webkit","moz","ms","-"].reduce(function(n,t){return void 0!==document[n[0]]?n:[t+"Hidden",t+"visibilitychange"]},["hidden","visibilitychange"]),r=i[0];i[1],"-"!==r[0]&&Y(document,"visibilitychange",function(){document[r]?R():J()},!1)}w.x=0,p(j.$index,j,w,l)}(),{destroy:function(){X(),tn(o.unobserve)&&o.unobserve(),I.forEach(function(n){return n()}),document.body.removeChild(xn)},index:function(n){return j.$index},on:function(n,t){var e=o[n+"Handlers"];return e.push(t),function(){return e.splice(e.indexOf(t),1)}},stop:function(){return z=!1},start:function(){return z=!0}}}function B(n){if(z){X(),y.or(b.start).rm(b.scroll),E=0;var t=n.touches[0];M=Date.now(),g=D=C=t.pageX,O=t.clientY,e(j.$index,j,w,l)}}function S(n){if(z&&!y.is(b.scroll)){var t=n.touches[0],e=t.pageX-D;if(y.is(b.start)&&2*Math.abs(e)<Math.abs(t.clientY-O))y.or(b.scroll).rm(b.start);else{var i=0<e?1:-1;E!==i&&(g=D,M=Date.now(),E=i),y.set(b.drag),D=t.pageX,A(w,H+=e)}}}function V(){k||F(j.$next),j=j.$prev,N()||(A(j.$prev,j.x-c),L(j.$prev))}function W(){k||F(j.$prev),j=j.$next,P()||(A(j.$next,j.x+c),L(j.$next))}function G(){0===i&&-j.x-H>c/2&&(i=1,W())}function J(){q(),x.auto=setTimeout(function(){z&&K()},mn)}function K(){i=0,y.set(b.auto),e(j.$index,j,w,l),Z(w,H,-j.x-c,pn,G,J)}function Q(){3<Math.abs(H+j.x)?K():J()}function U(n){if(z){if(y.is(b.scroll)&&!y.is(b.animate)&&!y.is(b.auto))return f&&Q();y.set(b.animate);var t=g<D,e=Date.now()-M<fn;if(!N()&&!P()){var i=j.x+H;e?t&&0<i?V():!t&&i<0&&W():$<i?V():i<-$&&W()}var r=-1*j.x,o=Math.min(Math.max(vn*Math.abs(r-H)/c,hn),pn);Z(w,H,r,e?hn:o,null,f?function(){return Q()}:null)}}function Z(i,r,o,u,a,c){var s=Date.now();!function n(){var t=Date.now()-s;if(u<=t&&(H=o),tn(a)&&a(),u<=t)return A(i,o),!y.is(b.cancel)&&tn(c)&&c(),y.set(b.idle),m(j.$index,j,w,l);var e=(o-r)*rn[v](t/u)+r;A(i,H=e),x.main=ln(n)}()}}});