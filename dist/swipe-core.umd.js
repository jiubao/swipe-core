!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["swipe-core"]=t()}(this,function(){"use strict";var nn=!!function(n){var t=!1;function e(){}var i=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("testPassive",e,i),window.removeEventListener("testPassive",e,i),t}()&&{capture:!1,passive:!0},tn=function(n,t,e,i){void 0===i&&(i=nn),n.removeEventListener(t,e,i)},en=function(n){return"function"==typeof n},rn=function(n){var t=n.getBoundingClientRect();return t.top<window.innerHeight&&0<t.bottom&&t.left<window.innerWidth&&0<t.right},on={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},un=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)};function an(){this.value=0}an.prototype={is:function(n){return this.value&n},or:function(n){return this.value=this.value|n,this},rm:function(n){return this.value=this.value&~n,this},set:function(n){return this.value=n,this}};var sn={root:null,rootMargin:"0px",threshold:[0,.01]},cn=!!window.IntersectionObserver;function ln(n){var t=this;n.forEach(function(n){return t.append(n)})}ln.prototype.append=function(n){var t=n.$next=n.$prev=n;return this.$tail?(t.$prev=this.$tail,t.$next=this.$tail.$next,(this.$tail.$next=t).$next.$prev=t,this.$tail=t):this.$head=this.$tail=t};var n=["webkit","moz","ms","o"],dn=n.reduce(function(n,t){return n||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame).bind(window),fn=n.reduce(function(n,t){return n||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame).bind(window);if(!dn||!fn){var e=0;dn=function(n){var t=+new Date;return e=Math.max(t,e+16),setTimeout(n,e-t)},fn=clearTimeout}var hn=120,vn=250,pn=1e3,mn=2*pn/3,wn=3e3,xn={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[],initHandlers:[],startHandlers:[],moveHandlers:[],endHandlers:[],animationEndHandlers:[]};return function(n){var t=document.createElement("div");t.style.display="none",document.body.appendChild(t);var o=Object.assign({},xn,n),u=o.index,a=o.root,l=o.elms,s=o.width,c=o.height,d=o.cycle,f=(o.expose,o.auto),h=o.css,v=o.ease;o.plugins.forEach(function(t){return Object.keys(t).forEach(function(n){return o[n+"Handlers"].push(t[n])})});var e=function(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return o[e+"Handlers"].forEach(function(n){return n.apply(null,t)})}},p=e("init"),i=e("start"),r=e("move"),m=e("end");if(a){h&&(s=Number(un(a,"width").slice(0,-2)),c=Number(un(a,"height").slice(0,-2)));var w=a.children[0],x={main:-1,auto:-1},$=s/3,b={idle:0,start:1,drag:2,animate:4,scroll:8,auto:16,cancel:32},g=new an,y=0,E=0,H=0,M=0,C=0,D=0,N=0,O=0,T=[],k=!1;f=d&&f;var j=l[u],A=function(n,t){var e,i;i=n.x=t,(e=n)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+i+"px, 0, 0)",r(j.$index,j,w,l))},F=function(n){return t.appendChild(n)},L=function(n){return w.appendChild(n)},P=function(n){return!d&&D<N&&j===T.$head},q=function(n){return!d&&N<=D&&j===T.$tail},R=function(n){return clearTimeout(x.auto)},X=function(n){return R(g.set(b.cancel))},z=function(n){R(),fn(x.main)},I=!0,Y=[],B=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return Y.push(function(n,t,e,i){return void 0===i&&(i=nn),n.addEventListener(t,e,i),function(){return tn(n,t,e,i)}}.apply(null,n))};return function(){if(0===l.length)return p(-1);a.style.position="relative",h||(a.style.width=s+"px",a.style.height=c+"px");var n=2===l.length&&d;n&&(l.push(l[0].cloneNode(!0)),L(l[2]),l.push(l[1].cloneNode(!0)),L(l[3]),l[0].$index=l[2].$index=0,l[1].$index=l[3].$index=1);var t=1===l.length;if(k=2===l.length,T=new ln(l),n||l.forEach(function(n,t){return n.$index=t}),A(j,0),t||k||A(j.$prev,-s),t||A(j.$next,s),l.forEach(function(n){n.style.position="absolute",h||(n.style.width=s+"px",n.style.height=c+"px"),k||t||n===j||n===j.$prev||n===j.$next||F(n)}),t)return p(j.$index,j,w,l);if(k||d||0!==u||F(j.$prev),k||d||u!==l.length-1||F(j.$next),B(a,"touchstart",S),B(a,"touchmove",V),B(a,"touchend",Z),f){if(cn)dn(function(){o.unobserve=function(n,t){if(!cn)return t();var e=new IntersectionObserver(t,sn);return e.observe(n),function(){e.unobserve(n)}}(a,function(n){n&&0===n[0].intersectionRatio?X():U()})});else{var e=function(){return rn(a)?K():X()};B(window,"touchmove",function(){return rn(a)||X()}),B(window,"touchend",e),e()}var i=["webkit","moz","ms","-"].reduce(function(n,t){return void 0!==document[n[0]]?n:[t+"Hidden",t+"visibilitychange"]},["hidden","visibilitychange"]),r=i[0];i[1],"-"!==r[0]&&B(document,"visibilitychange",function(){document[r]?X():K()},!1)}w.x=0,p(j.$index,j,w,l)}(),{destroy:function(){z(),en(o.unobserve)&&o.unobserve(),Y.forEach(function(n){return n()}),t.parentNode&&t.parentNode.removeChild(t)},index:function(n){return j.$index},on:function(n,t){var e=o[n+"Handlers"];return e.push(t),function(){return e.splice(e.indexOf(t),1)}},stop:function(){return I=!1},start:function(){return I=!0}}}function S(n){if(I){z(),g.or(b.start).rm(b.scroll),H=0;var t=n.touches[0];C=Date.now(),E=N=D=t.pageX,O=t.clientY,i(j.$index,j,w,l)}}function V(n){if(I&&!g.is(b.scroll)){var t=n.touches[0],e=t.pageX-N;if(g.is(b.start)&&2*Math.abs(e)<Math.abs(t.clientY-O))g.or(b.scroll).rm(b.start);else{var i=0<e?1:-1;H!==i&&(E=N,C=Date.now(),H=i),g.set(b.drag),N=t.pageX,A(w,M+=e)}}}function W(){k||F(j.$next),j=j.$prev,P()||(A(j.$prev,j.x-s),L(j.$prev))}function G(){k||F(j.$prev),j=j.$next,q()||(A(j.$next,j.x+s),L(j.$next))}function J(){0===y&&-j.x-M>s/2&&(y=1,G())}function K(){R(),x.auto=setTimeout(function(){I&&Q()},wn)}function Q(){y=0,g.set(b.auto),i(j.$index,j,w,l),_(w,M,-j.x-s,mn,J,K)}function U(){3<Math.abs(M+j.x)?Q():K()}function Z(n){if(I){if(g.is(b.scroll)&&!g.is(b.animate)&&!g.is(b.auto))return f&&U();g.set(b.animate);var t=E<N,e=Date.now()-C<hn;if(!P()&&!q()){var i=j.x+M;e?t&&0<i?W():!t&&i<0&&G():$<i?W():i<-$&&G()}var r=-1*j.x,o=Math.min(Math.max(pn*Math.abs(r-M)/s,vn),mn);_(w,M,r,e?vn:o,null,f?function(){return U()}:null)}}function _(i,r,o,u,a,s){var c=Date.now();!function n(){var t=Date.now()-c;if(u<=t&&(M=o),en(a)&&a(),u<=t)return A(i,o),!g.is(b.cancel)&&en(s)&&s(),g.set(b.idle),m(j.$index,j,w,l);var e=(o-r)*on[v](t/u)+r;A(i,M=e),x.main=dn(n)}()}}});