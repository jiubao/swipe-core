!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["swipe-core"]=t()}(this,function(){"use strict";function Q(n,t,e){n.addEventListener(t,e,!1)}function U(n,t,e){n.removeEventListener(t,e,!1)}function Z(n){return"function"==typeof n}function $(n,e){var i=this;this.list=[],n.forEach(function(n,t){n.index=Number(e?e[t]:t),i.append(n)})}$.prototype.append=function(n){var t,e=(t=n).next=t.prev=t;return this.list.push(e),this.tail?(e.prev=this.tail,e.next=this.tail.next,(this.tail.next=e).next.prev=e,this.tail=e):this.head=this.tail=e};var n=["webkit","moz","ms","o"],_=n.reduce(function(n,t){return n||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),nn=n.reduce(function(n,t){return n||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!_||!nn){var e=0;_=function(n){var t=+new Date;return e=Math.max(t,e+16),setTimeout(n,e-t)},nn=clearTimeout}var tn={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},en="touchstart",rn="touchmove",on="touchend",un=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)},an={root:null,rootMargin:"0px",threshold:[0,.01]},cn=!!window.IntersectionObserver,sn=120,fn=250,ln=1e3,dn=2*ln/3,hn=3e3,pn=function(){var n=!1;function t(){}var e=Object.defineProperty({},"passive",{get:function(){n=!0}});return window.addEventListener("testPassive",t,e),window.removeEventListener("testPassive",t,e),n}(),vn={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[]},xn=document.createElement("div");return xn.style.display="none",document.body.appendChild(xn),function(n){var e=Object.assign({},vn,n),o=e.index,u=e.root,f=e.elms,a=e.width,c=e.height,s=e.cycle,l=(e.expose,e.auto),d=e.css,h=e.ease,r=e.plugins,p=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r.forEach(function(n){return Z(n.init)&&n.init.apply(null,t)})},i=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r.forEach(function(n){return Z(n.start)&&n.start.apply(null,t)})},v=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r.forEach(function(n){return Z(n.end)&&n.end.apply(null,t)})},x=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r.forEach(function(n){return Z(n.endAnimation)&&n.endAnimation.apply(null,t)})};if(u){d&&(a=Number(un(u,"width").slice(0,-2)),c=Number(un(u,"height").slice(0,-2)));var m=u.children[0],w={main:-1,auto:-1},g=a/3,y=0,t=0,b=0,E=0,M=0,D=0,A=0,C=0,T=0,L=[],N=!1;l=s&&l;var F=f[o],O=function(n,t){var e,i;i=n.x=t,(e=n)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+i+"px, 0, 0)",function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];r.forEach(function(n){return Z(n.move)&&n.move.apply(null,t)})}(F.index,F,m,f))},P=function(n){return xn.appendChild(n)},j=function(n){return m.appendChild(n)},k=function(n){return!s&&A<C&&F===L.head},q=function(n){return!s&&C<=A&&F===L.tail},R=function(n){return clearTimeout(w.auto)},X=function(n){R(),nn(w.main)};return function(){if(0===f.length)return p(-1);u.style.position="relative",d||(u.style.width=a+"px",u.style.height=c+"px");var n=2===f.length&&s;n&&(f.push(f[0].cloneNode(!0)),j(f[2]),f.push(f[1].cloneNode(!0)),j(f[3]));var t=1===f.length;if(N=2===f.length,L=new $(f,n?"0101":null),O(F,0),t||N||O(F.prev,-a),t||O(F.next,a),f.forEach(function(n){n.style.position="absolute",d||(n.style.width=a+"px",n.style.height=c+"px"),N||t||n===F||n===F.prev||n===F.next||P(n)}),t)return p(F.index,F,m,f);if(N||s||0!==o||P(F.prev),N||s||o!==f.length-1||P(F.next),K(),Q(u,en,z),Q(u,rn,I),Q(u,on,G),l)if(cn)_(function(){e.unobserve=function(n,t){if(!cn)return t();var e=new IntersectionObserver(t,an);return e.observe(n),function(){e.unobserve(n)}}(u,function(n){n&&0===n[0].intersectionRatio?R(y=16):W()})});else{var i=!pn||{capture:!0,passive:!0},r=function(){return(n=u.getBoundingClientRect()).top<window.innerHeight&&0<n.bottom&&n.left<window.innerWidth&&0<n.right?W():R(y=16);var n};"scroll,resize,touchmove".split(",").forEach(function(n){return window.addEventListener(n,(t=r,e=!1,function(){e||(_(function(){t(),e=!1}),e=!0)}),i);var t,e}),r()}m.x=0,p(F.index,F,m,f)}(),{destroy:K,index:function(n){return F.index}}}function z(n){X(),E=y=0;var t=n.touches[0];D=Date.now(),b=C=A=t.pageX,T=t.clientY,i(F.index,F,m,f)}function I(n){if(2!==y&&4!==y){var t=n.touches[0],e=t.pageX-C;if(0===y&&2*Math.abs(e)<Math.abs(t.clientY-T))y=4;else{var i=0<e?1:-1;E!==i&&(b=C,D=Date.now(),E=i),y=1,C=t.pageX,O(m,M+=e),n.preventDefault()}}}function Y(){N||P(F.next),F=F.prev,k()||(O(F.prev,F.x-a),j(F.prev))}function B(){N||P(F.prev),F=F.next,q()||(O(F.next,F.x+a),j(F.next))}function H(){0===t&&-F.x-M>a/2&&(t=1,B())}function S(){R(),w.auto=setTimeout(function(){V()},hn)}function V(){t=0,y=8,J(m,M,-F.x-a,dn,H,S),v(F.next.index,F.next,m,f)}function W(n){3<Math.abs(M+F.x)?V():S()}function G(n){if(4!==y){y=2;var t=b<C,e=Date.now()-D<sn;if(!k()&&!q()){var i=F.x+M;e?t&&0<i?Y():!t&&i<0&&B():g<i?Y():i<-g&&B()}var r=-1*F.x,o=Math.min(Math.max(ln*Math.abs(r-M)/a,fn),dn);J(m,M,r,e?fn:o,null,l?function(){return W()}:null),v(F.index,F,m,f)}}function J(i,r,o,u,a,c){var s=Date.now();!function n(){Z(a)&&a();var t=Date.now()-s;if(u<=t)return O(i,o),16!==y&&Z(c)&&c(),x(F.index,F,m,f);var e=(o-r)*tn[h](t/u)+r;O(i,M=e),w.main=_(n)}()}function K(){X(),Z(e.unobserve)&&e.unobserve(),U(u,en,z),U(u,rn,I),U(u,on,G)}}});