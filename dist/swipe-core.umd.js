!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n["swipe-core"]=e()}(this,function(){"use strict";var U=function(n,e,t){n.addEventListener(e,t,!1)},Z=function(n,e,t){n.removeEventListener(e,t,!1)},_=function(n){return"function"==typeof n},nn=function(n){var e=n.getBoundingClientRect();return e.top<window.innerHeight&&0<e.bottom&&e.left<window.innerWidth&&0<e.right},en={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},tn="touchstart",rn="touchmove",on="touchend",un=function(n,e){return window.getComputedStyle(n,null).getPropertyValue(e)};function an(){this.value=0}an.prototype={is:function(n){return this.value&n},or:function(n){return this.value=this.value|n,this},rm:function(n){return this.value=this.value&~n,this},set:function(n){return this.value=n,this}};var sn={root:null,rootMargin:"0px",threshold:[0,.01]},cn=!!window.IntersectionObserver;function dn(n){var e=this;n.forEach(function(n){return e.append(n)})}dn.prototype.append=function(n){var e=n.$next=n.$prev=n;return this.$tail?(e.$prev=this.$tail,e.$next=this.$tail.$next,(this.$tail.$next=e).$next.$prev=e,this.$tail=e):this.$head=this.$tail=e};var n=["webkit","moz","ms","o"],ln=n.reduce(function(n,e){return n||window[e+"RequestAnimationFrame"]},window.requestAnimationFrame).bind(window),fn=n.reduce(function(n,e){return n||window[e+"CancelAnimationFrame"]},window.cancelAnimationFrame).bind(window);if(!ln||!fn){var t=0;ln=function(n){var e=+new Date;return t=Math.max(e,t+16),setTimeout(n,t-e)},fn=clearTimeout}var hn=120,vn=250,pn=1e3,mn=2*pn/3,wn=3e3,xn=(function(n){function e(){}var t=Object.defineProperty({},"passive",{get:function(){!0}});window.addEventListener("testPassive",e,t),window.removeEventListener("testPassive",e,t)}(),{auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[],initHandlers:[],startHandlers:[],moveHandlers:[],endHandlers:[],animationEndHandlers:[]}),$n=document.createElement("div");return $n.style.display="none",document.body.appendChild($n),function(n){var u=Object.assign({},xn,n),a=u.index,s=u.root,d=u.elms,c=u.width,l=u.height,f=u.cycle,h=(u.expose,u.auto),v=u.css,p=u.ease;u.plugins.forEach(function(e){return Object.keys(e).forEach(function(n){return u[n+"Handlers"].push(e[n])})});var e=function(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return u[t+"Handlers"].forEach(function(n){return n.apply(null,e)})}},m=e("init"),t=e("start"),r=e("move"),w=e("end");if(s){v&&(c=Number(un(s,"width").slice(0,-2)),l=Number(un(s,"height").slice(0,-2)));var x=s.children[0],$={main:-1,auto:-1},b=c/3,g={idle:0,start:1,drag:2,animate:4,scroll:8,auto:16,cancel:32},y=new an,i=0,E=0,o=0,H=0,M=0,D=0,C=0,O=0,T=[],k=!1;h=f&&h;var L=d[a],j=function(n,e){var t,i;i=n.x=e,(t=n)&&(t.style.transition=t.style.webkitTransition="",t.style.transform=t.style.webkitTransform="translate3d("+i+"px, 0, 0)",r(L.$index,L,x,d))},A=function(n){return $n.appendChild(n)},F=function(n){return x.appendChild(n)},N=function(n){return!f&&D<C&&L===T.$head},P=function(n){return!f&&C<=D&&L===T.$tail},q=function(n){return clearTimeout($.auto)},R=function(n){return q(y.set(g.cancel))},X=function(n){q(),fn($.main)};return function(){if(0===d.length)return m(-1);s.style.position="relative",v||(s.style.width=c+"px",s.style.height=l+"px");var n=2===d.length&&f;n&&(d.push(d[0].cloneNode(!0)),F(d[2]),d.push(d[1].cloneNode(!0)),F(d[3]),d[0].$index=d[2].$index=0,d[1].$index=d[3].$index=1);var e=1===d.length;if(k=2===d.length,T=new dn(d),n||d.forEach(function(n,e){return n.$index=e}),j(L,0),e||k||j(L.$prev,-c),e||j(L.$next,c),d.forEach(function(n){n.style.position="absolute",v||(n.style.width=c+"px",n.style.height=l+"px"),k||e||n===L||n===L.$prev||n===L.$next||A(n)}),e)return m(L.$index,L,x,d);if(k||f||0!==a||A(L.$prev),k||f||a!==d.length-1||A(L.$next),Q(),U(s,tn,z),U(s,rn,I),U(s,on,J),h){if(cn)ln(function(){u.unobserve=function(n,e){if(!cn)return e();var t=new IntersectionObserver(e,sn);return t.observe(n),function(){t.unobserve(n)}}(s,function(n){n&&0===n[0].intersectionRatio?R():G()})});else{var t=function(){return nn(s)?V():R()};U(window,"touchmove",function(){return nn(s)||R()}),U(window,"touchend",t),t()}var i=["webkit","moz","ms","-"].reduce(function(n,e){return void 0!==document[n[0]]?n:[e+"Hidden",e+"visibilitychange"]},["hidden","visibilitychange"]),r=i[0],o=i[1];"-"!==r[0]&&document.addEventListener(o,function(){return document[r]?R():V()},!1)}x.x=0,m(L.$index,L,x,d)}(),{destroy:Q,index:function(n){return L.$index},on:function(n,e){var t=u[n+"Handlers"];return t.push(e),function(){return t.splice(t.indexOf(e),1)}}}}function z(n){X(),y.or(g.start).rm(g.scroll),o=0;var e=n.touches[0];M=Date.now(),E=C=D=e.pageX,O=e.clientY,t(L.$index,L,x,d)}function I(n){if(!y.is(g.scroll)){var e=n.touches[0],t=e.pageX-C;if(y.is(g.start)&&2*Math.abs(t)<Math.abs(e.clientY-O))y.or(g.scroll).rm(g.start);else{var i=0<t?1:-1;o!==i&&(E=C,M=Date.now(),o=i),y.set(g.drag),C=e.pageX,j(x,H+=t),n.preventDefault()}}}function Y(){k||A(L.$next),L=L.$prev,N()||(j(L.$prev,L.x-c),F(L.$prev))}function B(){k||A(L.$prev),L=L.$next,P()||(j(L.$next,L.x+c),F(L.$next))}function S(){0===i&&-L.x-H>c/2&&(i=1,B())}function V(){q(),$.auto=setTimeout(function(){W()},wn)}function W(){i=0,y.set(g.auto),t(L.$index,L,x,d),K(x,H,-L.x-c,mn,S,V)}function G(){3<Math.abs(H+L.x)?W():V()}function J(n){if(y.is(g.scroll)&&!y.is(g.animate)&&!y.is(g.auto))return h&&G();y.set(g.animate);var e=E<C,t=Date.now()-M<hn;if(!N()&&!P()){var i=L.x+H;t?e&&0<i?Y():!e&&i<0&&B():b<i?Y():i<-b&&B()}var r=-1*L.x,o=Math.min(Math.max(pn*Math.abs(r-H)/c,vn),mn);K(x,H,r,t?vn:o,null,h?function(){return G()}:null)}function K(i,r,o,u,a,s){var c=Date.now();!function n(){var e=Date.now()-c;if(u<=e&&(H=o),_(a)&&a(),u<=e)return j(i,o),!y.is(g.cancel)&&_(s)&&s(),y.set(g.idle),w(L.$index,L,x,d);var t=(o-r)*en[p](e/u)+r;j(i,H=t),$.main=ln(n)}()}function Q(){X(),_(u.unobserve)&&u.unobserve(),Z(s,tn,z),Z(s,rn,I),Z(s,on,J)}}});