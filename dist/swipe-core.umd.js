!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["swipe-core"]=e()}(this,function(){"use strict";function P(t,e,n){t.addEventListener(e,n,!1)}function R(t,e,n){t.removeEventListener(e,n,!1)}function S(t){return"function"==typeof t}function V(t){var n=this;this.list=[],t.forEach(function(t,e){t.index=e,n.append(t)})}V.prototype.append=function(t){var e,n=(e=t).next=e.prev=e;return this.list.push(n),this.tail?(n.prev=this.tail,n.next=this.tail.next,(this.tail.next=n).next.prev=n,this.tail=n):this.head=this.tail=n};var t=["webkit","moz","ms","o"],B=t.reduce(function(t,e){return t||window[e+"RequestAnimationFrame"]},window.requestAnimationFrame),G=t.reduce(function(t,e){return t||window[e+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!B||!G){var n=0;B=function(t){var e=+new Date;return n=Math.max(e,n+16),setTimeout(t,n-e)},G=clearTimeout}var H=function(t){return--t*t*t+1},I="touchstart",J="touchmove",K="touchend",Q=function(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)},U=120,W=250,Z=1e3,$=2*Z/3,_=3e3,tt={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1},e=document.createElement("div");e.style.display="none",document.body.appendChild(e);var et=function(t,e){t.x=e,it(t,e)},nt=function(t){return e.appendChild(t)};function it(t,e){t&&(t.style.transition=t.style.webkitTransition="",t.style.transform=t.style.webkitTransform="translate3d("+e+"px, 0, 0)")}return function(t){var e=Object.assign({},tt,t),n=e.index,i=e.root,o=e.elms,u=e.width,r=e.height,a=e.cycle,s=e.expose,c=e.auto,l=e.css;if(i){l&&(u=Number(Q(i,"width").slice(0,-2)),r=Number(Q(i,"height").slice(0,-2)));var f=i.children[0],h={main:-1,timeouts:[]},d=u/3,p=0,m=0,v=0,x=0,w=0,y=0,g=0,b=0,D=0,M=[],T=!1,C=o[n],E=function(t){return f.appendChild(t)},A=function(){return!a&&g<b&&C===M.head},F=function(){return!a&&b<=g&&C===M.tail};return function(){if(0!==o.length){s||(i.style.overflow="hidden"),i.style.position="relative",l||(i.style.width=u+"px",i.style.height=r+"px"),2===o.length&&a&&(o.push(o[0].cloneNode(!0)),E(o[2]),o.push(o[1].cloneNode(!0)),E(o[3]));var e=1===o.length;T=2===o.length,M=new V(o),et(C,0),e||T||et(C.prev,-u),e||et(C.next,u),o.forEach(function(t){t.style.position="absolute",l||(t.style.width=u+"px",t.style.height=r+"px"),t.style.overflow="hidden",T||e||t===C||t===C.prev||t===C.next||nt(t)}),e||(T||a||0!==n||nt(C.prev),T||a||n!==o.length-1||nt(C.next),O(),P(i,I,N),P(i,J,k),P(i,K,Y),c&&L())}}(),{destroy:O,index:function(t){return C.index}}}function N(t){for(G(h.main);h.timeouts.length;)clearTimeout(h.timeouts.splice(0,1)[0]);x=p=0;var e=t.touches[0];y=Date.now(),v=b=g=e.pageX,D=e.clientY}function k(t){if(2!==p&&4!==p){var e=t.touches[0],n=e.pageX-b;if(0===p&&2*Math.abs(n)<Math.abs(e.clientY-D))p=4;else{var i=0<n?1:-1;x!==i&&(v=b,y=Date.now(),x=i),p=1,b=e.pageX,it(f,w+=n),t.preventDefault()}}}function X(){T||nt(C.next),C=C.prev,A()||(et(C.prev,C.x-u),E(C.prev))}function j(){T||nt(C.prev),C=C.next,F()||(et(C.next,C.x+u),E(C.next))}function q(){-C.x-w<=u/2?m=0:0===m&&(m=1,j())}function L(){h.timeouts.push(setTimeout(function(){return z(f,w,w-u,$,q,L)},_))}function Y(t){if(4!==p){p=2;var e=v<b,n=Date.now()-y<U;if(!A()&&!F()){var i=C.x+w;n?e&&0<i?X():!e&&i<0&&j():d<i?X():i<-d&&j()}var o=-1*C.x,r=Math.min(Math.max(Z*Math.abs(o-w)/u,W),$);z(f,w,o,n?W:r),c&&L()}}function z(i,o,r,u,a,s){var c=Date.now();!function t(){S(a)&&a();var e=Date.now()-c;if(u<=e)return it(i,r),void(S(s)&&s());var n=(r-o)*H(e/u)+o;it(i,w=n),h.main=B(t)}()}function O(){R(i,I,N),R(i,J,k),R(i,K,Y)}}});