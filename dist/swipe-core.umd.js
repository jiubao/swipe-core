!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["swipe-core"]=t()}(this,function(){"use strict";function K(e,t,n){e.addEventListener(t,n,!1)}function Q(e,t,n){e.removeEventListener(t,n,!1)}function U(e){return"function"==typeof e}function W(e){var n=this;this.list=[],e.forEach(function(e,t){e.index=t,n.append(e)})}W.prototype.append=function(e){var t,n=(t=e).next=t.prev=t;return this.list.push(n),this.tail?(n.prev=this.tail,n.next=this.tail.next,(this.tail.next=n).next.prev=n,this.tail=n):this.head=this.tail=n};var e=["webkit","moz","ms","o"],Z=e.reduce(function(e,t){return e||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),$=e.reduce(function(e,t){return e||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!Z||!$){var n=0;Z=function(e){var t=+new Date;return n=Math.max(t,n+16),setTimeout(e,n-t)},$=clearTimeout}var _={cubic:function(e){return--e*e*e+1},circ:function(e){return Math.sqrt(1-Math.pow(e-1,2))}},ee="touchstart",te="touchmove",ne="touchend",ie=function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)},oe={root:null,rootMargin:"0px",threshold:[0,.01]},re=120,ue=250,ae=1e3,ce=2*ae/3,se=3e3,t=function(e){},fe={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",onInit:t,onStart:t,onMove:t,onEnd:t},le=document.createElement("div");return le.style.display="none",document.body.appendChild(le),function(e){var n=Object.assign({},fe,e),i=n.index,o=n.root,r=n.elms,u=n.width,a=n.height,c=n.cycle,s=n.expose,f=n.auto,l=n.css,d=n.onEnd,h=n.ease,p=n.onMove,v=n.onStart,x=n.onInit;if(o){l&&(u=Number(ie(o,"width").slice(0,-2)),a=Number(ie(o,"height").slice(0,-2)));var m=o.children[0],w={main:-1,auto:-1},y=u/3,b=0,t=0,g=0,M=0,D=0,E=0,T=0,C=0,A=0,F=[],I=!1;f=c&&f;var N=r[i],k=function(e,t){var n,i;i=e.x=t,(n=e)&&(n.style.transition=n.style.webkitTransition="",n.style.transform=n.style.webkitTransform="translate3d("+i+"px, 0, 0)",p(N,m,r))},q=function(e){return le.appendChild(e)},O=function(e){return m.appendChild(e)},S=function(e){return!c&&T<C&&N===F.head},X=function(e){return!c&&C<=T&&N===F.tail},j=function(e){return clearTimeout(w.auto)},L=function(e){j(),$(w.main)};return function(){if(0!==r.length){s||(o.style.overflow="hidden"),o.style.position="relative",l||(o.style.width=u+"px",o.style.height=a+"px"),2===r.length&&c&&(r.push(r[0].cloneNode(!0)),O(r[2]),r.push(r[1].cloneNode(!0)),O(r[3]));var t=1===r.length;I=2===r.length,F=new W(r),k(N,0),t||I||k(N.prev,-u),t||k(N.next,u),r.forEach(function(e){e.style.position="absolute",l||(e.style.width=u+"px",e.style.height=a+"px"),e.style.overflow="hidden",I||t||e===N||e===N.prev||e===N.next||q(e)}),t||(I||c||0!==i||q(N.prev),I||c||i!==r.length-1||q(N.next),J(),K(o,ee,R),K(o,te,Y),K(o,ne,G),f&&Z(function(){n.unobserve=function(e,t){if(!window.IntersectionObserver)return t();var n=new IntersectionObserver(t,oe);return n.observe(e),function(){n.unobserve(e)}}(o,function(e){e&&0===e[0].intersectionRatio?j(b=16):B()})}),m.x=0,x(N,m))}}(),{destroy:J,index:function(e){return N.index}}}function R(e){L(),M=b=0;var t=e.touches[0];E=Date.now(),g=C=T=t.pageX,A=t.clientY,v(m)}function Y(e){if(2!==b&&4!==b){var t=e.touches[0],n=t.pageX-C;if(0===b&&2*Math.abs(n)<Math.abs(t.clientY-A))b=4;else{var i=0<n?1:-1;M!==i&&(g=C,E=Date.now(),M=i),b=1,C=t.pageX,k(m,D+=n),e.preventDefault()}}}function z(){I||q(N.next),N=N.prev,S()||(k(N.prev,N.x-u),O(N.prev))}function P(){I||q(N.prev),N=N.next,X()||(k(N.next,N.x+u),O(N.next))}function V(){0===t&&-N.x-D>u/2&&(t=1,P())}function B(){j(),w.auto=setTimeout(function(){t=0,b=8,H(m,D,D-u,ce,V,B)},se)}function G(e){if(f&&B(),4!==b){b=2;var t=g<C,n=Date.now()-E<re;if(!S()&&!X()){var i=N.x+D;n?t&&0<i?z():!t&&i<0&&P():y<i?z():i<-y&&P()}var o=-1*N.x,r=Math.min(Math.max(ae*Math.abs(o-D)/u,ue),ce);H(m,D,o,n?ue:r)}}function H(i,o,r,u,a,c){var s=Date.now();!function e(){U(a)&&a();var t=Date.now()-s;if(u<=t)return k(i,r),16!==b&&U(c)&&c(),U(d)&&d(N.index,m);var n=(r-o)*_[h](t/u)+o;k(i,D=n),w.main=Z(e)}()}function J(){L(),U(n.unobserve)&&n.unobserve(),Q(o,ee,R),Q(o,te,Y),Q(o,ne,G)}}});