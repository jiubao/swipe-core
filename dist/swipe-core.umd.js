!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["swipe-core"]=t()}(this,function(){"use strict";function K(n,t,e){n.addEventListener(t,e,!1)}function Q(n,t,e){n.removeEventListener(t,e,!1)}function U(n){return"function"==typeof n}function W(n,e){var i=this;this.list=[],n.forEach(function(n,t){n.index=Number(e?e[t]:t),i.append(n)})}W.prototype.append=function(n){var t,e=(t=n).next=t.prev=t;return this.list.push(e),this.tail?(e.prev=this.tail,e.next=this.tail.next,(this.tail.next=e).next.prev=e,this.tail=e):this.head=this.tail=e};var n=["webkit","moz","ms","o"],Z=n.reduce(function(n,t){return n||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),$=n.reduce(function(n,t){return n||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!Z||!$){var e=0;Z=function(n){var t=+new Date;return e=Math.max(t,e+16),setTimeout(n,e-t)},$=clearTimeout}var _={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},nn="touchstart",tn="touchmove",en="touchend",rn=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)},on={root:null,rootMargin:"0px",threshold:[0,.01]},un=120,an=250,cn=1e3,sn=2*cn/3,fn=3e3,ln={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[]},hn=document.createElement("div");return hn.style.display="none",document.body.appendChild(hn),function(n){var e=Object.assign({},ln,n),i=e.index,r=e.root,f=e.elms,u=e.width,o=e.height,a=e.cycle,c=(e.expose,e.auto),s=e.css,l=e.ease,h=e.plugins,d=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return h.forEach(function(n){return U(n.init)&&n.init.apply(null,t)})},p=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return h.forEach(function(n){return U(n.start)&&n.start.apply(null,t)})},v=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return h.forEach(function(n){return U(n.end)&&n.end.apply(null,t)})},x=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return h.forEach(function(n){return U(n.endAnimation)&&n.endAnimation.apply(null,t)})};if(r){s&&(u=Number(rn(r,"width").slice(0,-2)),o=Number(rn(r,"height").slice(0,-2)));var m=r.children[0],w={main:-1,auto:-1},y=u/3,g=0,t=0,b=0,E=0,M=0,D=0,A=0,T=0,C=0,N=[],F=!1;c=a&&c;var k=f[i],q=function(n,t){var e,i;i=n.x=t,(e=n)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+i+"px, 0, 0)",function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];h.forEach(function(n){return U(n.move)&&n.move.apply(null,t)})}(k.index,k,m,f))},O=function(n){return hn.appendChild(n)},X=function(n){return m.appendChild(n)},j=function(n){return!a&&A<T&&k===N.head},I=function(n){return!a&&T<=A&&k===N.tail},L=function(n){return clearTimeout(w.auto)},R=function(n){L(),$(w.main)};return function(){if(0===f.length)return d(-1);r.style.position="relative",s||(r.style.width=u+"px",r.style.height=o+"px");var n=2===f.length&&a;n&&(f.push(f[0].cloneNode(!0)),X(f[2]),f.push(f[1].cloneNode(!0)),X(f[3]));var t=1===f.length;if(F=2===f.length,N=new W(f,n?"0101":null),q(k,0),t||F||q(k.prev,-u),t||q(k.next,u),f.forEach(function(n){n.style.position="absolute",s||(n.style.width=u+"px",n.style.height=o+"px"),F||t||n===k||n===k.prev||n===k.next||O(n)}),t)return d(k.index,k,m,f);F||a||0!==i||O(k.prev),F||a||i!==f.length-1||O(k.next),J(),K(r,nn,Y),K(r,tn,z),K(r,en,G),c&&Z(function(){e.unobserve=function(n,t){if(!window.IntersectionObserver)return t();var e=new IntersectionObserver(t,on);return e.observe(n),function(){e.unobserve(n)}}(r,function(n){n&&0===n[0].intersectionRatio?L(g=16):B()})}),m.x=0,d(k.index,k,m,f)}(),{destroy:J,index:function(n){return k.index}}}function Y(n){R(),E=g=0;var t=n.touches[0];D=Date.now(),b=T=A=t.pageX,C=t.clientY,p(k.index,k,m,f)}function z(n){if(2!==g&&4!==g){var t=n.touches[0],e=t.pageX-T;if(0===g&&2*Math.abs(e)<Math.abs(t.clientY-C))g=4;else{var i=0<e?1:-1;E!==i&&(b=T,D=Date.now(),E=i),g=1,T=t.pageX,q(m,M+=e),n.preventDefault()}}}function P(){F||O(k.next),k=k.prev,j()||(q(k.prev,k.x-u),X(k.prev))}function S(){F||O(k.prev),k=k.next,I()||(q(k.next,k.x+u),X(k.next))}function V(){0===t&&-k.x-M>u/2&&(t=1,S())}function B(){L(),w.auto=setTimeout(function(){t=0,g=8,H(m,M,M-u,sn,V,B),v(k.next.index,k.next,m,f)},fn)}function G(n){if(c&&B(),4!==g){g=2;var t=b<T,e=Date.now()-D<un;if(!j()&&!I()){var i=k.x+M;e?t&&0<i?P():!t&&i<0&&S():y<i?P():i<-y&&S()}var r=-1*k.x,o=Math.min(Math.max(cn*Math.abs(r-M)/u,an),sn);H(m,M,r,e?an:o),v(k.index,k,m,f)}}function H(i,r,o,u,a,c){var s=Date.now();!function n(){U(a)&&a();var t=Date.now()-s;if(u<=t)return q(i,o),16!==g&&U(c)&&c(),x(k.index,k,m,f);var e=(o-r)*_[l](t/u)+r;q(i,M=e),w.main=Z(n)}()}function J(){R(),U(e.unobserve)&&e.unobserve(),Q(r,nn,Y),Q(r,tn,z),Q(r,en,G)}}});