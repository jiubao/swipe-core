!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["swipe-core"]=t()}(this,function(){"use strict";function L(e,t,n){e.addEventListener(t,n,!1)}function N(e,t,n){e.removeEventListener(t,n,!1)}function Y(e){var n=this;this.list=[],e.forEach(function(e,t){e.index=t,n.append(e)})}Y.prototype.append=function(e){var t,n=(t=e).next=t.prev=t;return this.list.push(n),this.tail?(n.prev=this.tail,n.next=this.tail.next,(this.tail.next=n).next.prev=n,this.tail=n):this.head=this.tail=n};var e=["webkit","moz","ms","o"],z=e.reduce(function(e,t){return e||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),O=e.reduce(function(e,t){return e||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!z||!O){var n=0;z=function(e){var t=+new Date;return n=Math.max(t,n+16),setTimeout(e,n-t)},O=clearTimeout}var R=function(e){return--e*e*e+1},B="touchstart",G="touchmove",H="touchend",I=120,J=250,K=1e3,P={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200},t=document.createElement("div");t.style.display="none",document.body.appendChild(t);var Q=function(e,t){e.x=t,U(e,t)},S=function(e){return t.appendChild(e)};function U(e,t){e&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+t+"px, 0, 0)")}return function(e){var t=Object.assign({},P,e),n=t.index,i=t.root,o=t.elms,h=t.width,r=t.height,a=t.cycle,s=t.expose;if(t.auto,i){var d=i.children[0],f={main:-1},p=h/3,v=0,x=0,u=0,m=0,w=0,y=0,g=0,c=0,l=[],b=!1,D=o[n],M=function(e){return d.appendChild(e)},E=function(){return!a&&y<g&&D===l.head},A=function(){return!a&&g<=y&&D===l.tail};return j(),{init:j,destroy:q}}function C(e){2===v&&O(f.main),u=v=0;var t=e.touches[0];w=Date.now(),x=g=y=t.pageX,c=t.clientY}function F(e){if(2!==v&&4!==v){var t=e.touches[0],n=t.pageX-g;if(0===v&&2*Math.abs(n)<Math.abs(t.clientY-c))v=4;else{var i=0<n?1:-1;u!==i&&(x=g,w=Date.now(),u=i),v=1,g=t.pageX,U(d,m+=n),e.preventDefault()}}}function T(){b||S(D.next),D=D.prev,E()||(Q(D.prev,D.x-h),M(D.prev))}function k(){b||S(D.prev),D=D.next,A()||(Q(D.next,D.x+h),M(D.next))}function X(e){if(4!==v&&g!==y){v=2;var t=x<g,n=Date.now()-w<I;if(!E()&&!A()){var i=D.x+m;n?t&&0<i?T():!t&&i<0&&k():p<i?T():i<-p&&k()}var o,r,a,s,u,c=-1*D.x,l=Math.min(Math.max(K*Math.abs(c-m)/h,J),2*K/3);o=d,r=m,a=c,s=n?J:l,u=Date.now(),function e(){var t=Date.now()-u;if(s<=t)U(o,a);else{var n=(a-r)*R(t/s)+r;U(o,m=n),f.main=z(e)}}()}}function j(){if(0!==o.length){s||(i.style.overflow="hidden"),i.style.position="relative",i.style.width=h+"px",i.style.height=r+"px",2===o.length&&a&&(o.push(o[0].cloneNode(!0)),M(o[2]),o.push(o[1].cloneNode(!0)),M(o[3]));var t=1===o.length;b=2===o.length,l=new Y(o),Q(D,0),t||b||Q(D.prev,-h),t||Q(D.next,h),o.forEach(function(e){e.style.position="absolute",e.style.width=h+"px",e.style.height=r+"px",e.style.overflow="hidden",b||t||e===D||e===D.prev||e===D.next||S(e)}),t||(b||a||0!==n||S(D.prev),b||a||n!==o.length-1||S(D.next),q(),L(i,B,C),L(i,G,F),L(i,H,X))}}function q(){N(i,B,C),N(i,G,F),N(i,H,X)}}});