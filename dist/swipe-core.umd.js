!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["swipe-core"]=t()}(this,function(){"use strict";function V(e,t,n){e.addEventListener(t,n,!1)}function B(e,t,n){e.removeEventListener(t,n,!1)}function G(e){return"function"==typeof e}function H(e){var n=this;this.list=[],e.forEach(function(e,t){e.index=t,n.append(e)})}H.prototype.append=function(e){var t,n=(t=e).next=t.prev=t;return this.list.push(n),this.tail?(n.prev=this.tail,n.next=this.tail.next,(this.tail.next=n).next.prev=n,this.tail=n):this.head=this.tail=n};var e=["webkit","moz","ms","o"],J=e.reduce(function(e,t){return e||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),K=e.reduce(function(e,t){return e||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!J||!K){var n=0;J=function(e){var t=+new Date;return n=Math.max(t,n+16),setTimeout(e,n-t)},K=clearTimeout}var Q={cubic:function(e){return--e*e*e+1},circ:function(e){return Math.sqrt(1-Math.pow(e-1,2))}},U="touchstart",W="touchmove",Z="touchend",$=function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)},_={root:null,rootMargin:"0px",threshold:[0,.01]},ee=120,te=250,ne=1e3,ie=2*ne/3,oe=3e3,re={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic"},t=document.createElement("div");t.style.display="none",document.body.appendChild(t);var ue=function(e,t){e.x=t,ce(e,t)},ae=function(e){return t.appendChild(e)};function ce(e,t){e&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+t+"px, 0, 0)")}return function(e){var n=Object.assign({},re,e),i=n.index,o=n.root,r=n.elms,u=n.width,a=n.height,c=n.cycle,s=n.expose,f=n.auto,l=n.css,h=n.onEnd,d=n.ease;if(o){l&&(u=Number($(o,"width").slice(0,-2)),a=Number($(o,"height").slice(0,-2)));var p=o.children[0],v={main:-1,auto:-1},x=u/3,m=0,t=0,w=0,y=0,b=0,g=0,M=0,D=0,E=0,T=[],C=!1;f=c&&f;var A=r[i],F=function(e){return p.appendChild(e)},N=function(e){return!c&&M<D&&A===T.head},k=function(e){return!c&&D<=M&&A===T.tail},q=function(e){return clearTimeout(v.auto)},O=function(e){q(),K(v.main)};return function(){if(0!==r.length){s||(o.style.overflow="hidden"),o.style.position="relative",l||(o.style.width=u+"px",o.style.height=a+"px"),2===r.length&&c&&(r.push(r[0].cloneNode(!0)),F(r[2]),r.push(r[1].cloneNode(!0)),F(r[3]));var t=1===r.length;C=2===r.length,T=new H(r),ue(A,0),t||C||ue(A.prev,-u),t||ue(A.next,u),r.forEach(function(e){e.style.position="absolute",l||(e.style.width=u+"px",e.style.height=a+"px"),e.style.overflow="hidden",C||t||e===A||e===A.prev||e===A.next||ae(e)}),t||(C||c||0!==i||ae(A.prev),C||c||i!==r.length-1||ae(A.next),S(),V(o,U,X),V(o,W,j),V(o,Z,z),f&&J(function(){n.unobserve=function(e,t){if(!window.IntersectionObserver)return t();var n=new IntersectionObserver(t,_);return n.observe(e),function(){n.unobserve(e)}}(o,function(e){e&&0===e[0].intersectionRatio?q(m=16):Y()})}))}}(),{destroy:S,index:function(e){return A.index}}}function X(e){O(),y=m=0;var t=e.touches[0];g=Date.now(),w=D=M=t.pageX,E=t.clientY}function j(e){if(2!==m&&4!==m){var t=e.touches[0],n=t.pageX-D;if(0===m&&2*Math.abs(n)<Math.abs(t.clientY-E))m=4;else{var i=0<n?1:-1;y!==i&&(w=D,g=Date.now(),y=i),m=1,D=t.pageX,ce(p,b+=n),e.preventDefault()}}}function I(){C||ae(A.next),A=A.prev,N()||(ue(A.prev,A.x-u),F(A.prev))}function L(){C||ae(A.prev),A=A.next,k()||(ue(A.next,A.x+u),F(A.next))}function R(){0===t&&-A.x-b>u/2&&(t=1,L())}function Y(){q(),v.auto=setTimeout(function(){t=0,m=8,P(p,b,b-u,ie,R,Y)},oe)}function z(e){if(f&&Y(),4!==m){m=2;var t=w<D,n=Date.now()-g<ee;if(!N()&&!k()){var i=A.x+b;n?t&&0<i?I():!t&&i<0&&L():x<i?I():i<-x&&L()}var o=-1*A.x,r=Math.min(Math.max(ne*Math.abs(o-b)/u,te),ie);P(p,b,o,n?te:r)}}function P(i,o,r,u,a,c){var s=Date.now();!function e(){G(a)&&a();var t=Date.now()-s;if(u<=t)return ce(i,r),16!==m&&G(c)&&c(),G(h)&&h(A.index);var n=(r-o)*Q[d](t/u)+o;ce(i,b=n),v.main=J(e)}()}function S(){O(),G(n.unobserve)&&n.unobserve(),B(o,U,X),B(o,W,j),B(o,Z,z)}}});