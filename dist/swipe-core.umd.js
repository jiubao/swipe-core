!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["swipe-core"]=t()}(this,function(){"use strict";var nn=!!function(n){var t=!1;function e(){}var i=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("testPassive",e,i),window.removeEventListener("testPassive",e,i),t}()&&{capture:!1,passive:!0},tn=function(n,t,e,i){void 0===i&&(i=nn),n.removeEventListener(t,e,i)},en=function(n){return"function"==typeof n},rn=function(n){var t=n.getBoundingClientRect();return t.top<window.innerHeight&&0<t.bottom&&t.left<window.innerWidth&&0<t.right},on={cubic:function(n){return--n*n*n+1},circ:function(n){return Math.sqrt(1-Math.pow(n-1,2))}},un=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)};function an(){this.value=0}an.prototype={is:function(n){return this.value&n},or:function(n){return this.value=this.value|n,this},rm:function(n){return this.value=this.value&~n,this},set:function(n){return this.value=n,this}};var cn={root:null,rootMargin:"0px",threshold:[0,.01]},sn=!!window.IntersectionObserver;function ln(n){var t=this;n.forEach(function(n){return t.append(n)})}ln.prototype.append=function(n){var t=n.$next=n.$prev=n;return this.$tail?(t.$prev=this.$tail,t.$next=this.$tail.$next,(this.$tail.$next=t).$next.$prev=t,this.$tail=t):this.$head=this.$tail=t};var n=["webkit","moz","ms","o"],dn=n.reduce(function(n,t){return n||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame).bind(window),fn=n.reduce(function(n,t){return n||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame).bind(window);if(!dn||!fn){var e=0;dn=function(n){var t=+new Date;return e=Math.max(t,e+16),setTimeout(n,e-t)},fn=clearTimeout}var hn=120,vn=250,pn=1e3,mn=2*pn/3,wn=3e3,xn={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[],initHandlers:[],startHandlers:[],moveHandlers:[],endHandlers:[],animationEndHandlers:[]};return function(n){var t=document.createElement("div");t.style.display="none",document.body.appendChild(t);var o=Object.assign({},xn,n),u=o.index,a=o.root,l=o.elms,c=o.width,s=o.height,d=o.cycle,f=(o.expose,o.auto),h=o.css,v=o.ease;o.plugins.forEach(function(t){return Object.keys(t).forEach(function(n){return o[n+"Handlers"].push(t[n])})});var e=function(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return o[e+"Handlers"].forEach(function(n){return n.apply(null,t)})}},p=e("init"),i=e("start"),r=e("move"),m=e("end");if(a){h&&(c=Number(un(a,"width").slice(0,-2)),s=Number(un(a,"height").slice(0,-2)));var w=a.children[0],x={main:-1,auto:-1},$=c/3,b={idle:0,start:1,drag:2,animate:4,scroll:8,auto:16,cancel:32},y=new an,g=0,E=0,H=0,M=0,C=0,D=0,O=0,T=0,k=[],j=!1;f=d&&f;var A=l[u],F=function(n,t){var e,i;i=n.x=t,(e=n)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+i+"px, 0, 0)",r(A.$index,A,w,l))},L=function(n){return t.appendChild(n)},N=function(n){return w.appendChild(n)},P=function(n){return!d&&D<O&&A===k.$head},q=function(n){return!d&&O<=D&&A===k.$tail},R=function(n){return clearTimeout(x.auto)},X=function(n){return R(y.set(b.cancel))},z=function(n){R(),fn(x.main)},I=!0,Y=[],B=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return Y.push(function(n,t,e,i){return void 0===i&&(i=nn),n.addEventListener(t,e,i),function(){return tn(n,t,e,i)}}.apply(null,n))};return function(){if(0===l.length)return p(-1);a.style.position="relative",h||(a.style.width=c+"px",a.style.height=s+"px");var n=2===l.length&&d;n&&(l.push(l[0].cloneNode(!0)),N(l[2]),l.push(l[1].cloneNode(!0)),N(l[3]),l[0].$index=l[2].$index=0,l[1].$index=l[3].$index=1);var t=1===l.length;if(j=2===l.length,k=new ln(l),n||l.forEach(function(n,t){return n.$index=t}),F(A,0),t||j||F(A.$prev,-c),t||F(A.$next,c),l.forEach(function(n){n.style.position="absolute",h||(n.style.width=c+"px",n.style.height=s+"px"),j||t||n===A||n===A.$prev||n===A.$next||L(n)}),t)return p(A.$index,A,w,l);if(j||d||0!==u||L(A.$prev),j||d||u!==l.length-1||L(A.$next),B(a,"touchstart",S),B(a,"touchmove",V),B(a,"touchend",Z),f){if(sn)dn(function(){o.unobserve=function(n,t){if(!sn)return t();var e=new IntersectionObserver(t,cn);return e.observe(n),function(){e.unobserve(n)}}(a,function(n){n&&0===n[0].intersectionRatio?X():U()})});else{var e=function(){return rn(a)?K():X()};B(window,"touchmove",function(){return rn(a)||X()}),B(window,"touchend",e),e()}var i=["webkit","moz","ms","-"].reduce(function(n,t){return void 0!==document[n[0]]?n:[t+"Hidden",t+"visibilitychange"]},["hidden","visibilitychange"]),r=i[0];i[1],"-"!==r[0]&&B(document,"visibilitychange",function(){document[r]?X():K()},!1)}w.x=0,p(A.$index,A,w,l)}(),{destroy:function(){z(),en(o.unobserve)&&o.unobserve(),Y.forEach(function(n){return n()}),document.body.removeChild(t)},index:function(n){return A.$index},on:function(n,t){var e=o[n+"Handlers"];return e.push(t),function(){return e.splice(e.indexOf(t),1)}},stop:function(){return I=!1},start:function(){return I=!0}}}function S(n){if(I){z(),y.or(b.start).rm(b.scroll),H=0;var t=n.touches[0];C=Date.now(),E=O=D=t.pageX,T=t.clientY,i(A.$index,A,w,l)}}function V(n){if(I&&!y.is(b.scroll)){var t=n.touches[0],e=t.pageX-O;if(y.is(b.start)&&2*Math.abs(e)<Math.abs(t.clientY-T))y.or(b.scroll).rm(b.start);else{var i=0<e?1:-1;H!==i&&(E=O,C=Date.now(),H=i),y.set(b.drag),O=t.pageX,F(w,M+=e)}}}function W(){j||L(A.$next),A=A.$prev,P()||(F(A.$prev,A.x-c),N(A.$prev))}function G(){j||L(A.$prev),A=A.$next,q()||(F(A.$next,A.x+c),N(A.$next))}function J(){0===g&&-A.x-M>c/2&&(g=1,G())}function K(){R(),x.auto=setTimeout(function(){I&&Q()},wn)}function Q(){g=0,y.set(b.auto),i(A.$index,A,w,l),_(w,M,-A.x-c,mn,J,K)}function U(){3<Math.abs(M+A.x)?Q():K()}function Z(n){if(I){if(y.is(b.scroll)&&!y.is(b.animate)&&!y.is(b.auto))return f&&U();y.set(b.animate);var t=E<O,e=Date.now()-C<hn;if(!P()&&!q()){var i=A.x+M;e?t&&0<i?W():!t&&i<0&&G():$<i?W():i<-$&&G()}var r=-1*A.x,o=Math.min(Math.max(pn*Math.abs(r-M)/c,vn),mn);_(w,M,r,e?vn:o,null,f?function(){return U()}:null)}}function _(i,r,o,u,a,c){var s=Date.now();!function n(){var t=Date.now()-s;if(u<=t&&(M=o),en(a)&&a(),u<=t)return F(i,o),!y.is(b.cancel)&&en(c)&&c(),y.set(b.idle),m(A.$index,A,w,l);var e=(o-r)*on[v](t/u)+r;F(i,M=e),x.main=dn(n)}()}}});