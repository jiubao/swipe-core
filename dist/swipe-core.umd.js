!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["swipe-core"]=t()}(this,function(){"use strict";function J(e,t,n){e.addEventListener(t,n,!1)}function K(e,t,n){e.removeEventListener(t,n,!1)}function Q(e){return"function"==typeof e}function U(e){var n=this;this.list=[],e.forEach(function(e,t){e.index=t,n.append(e)})}U.prototype.append=function(e){var t,n=(t=e).next=t.prev=t;return this.list.push(n),this.tail?(n.prev=this.tail,n.next=this.tail.next,(this.tail.next=n).next.prev=n,this.tail=n):this.head=this.tail=n};var e=["webkit","moz","ms","o"],W=e.reduce(function(e,t){return e||window[t+"RequestAnimationFrame"]},window.requestAnimationFrame),Z=e.reduce(function(e,t){return e||window[t+"CancelAnimationFrame"]},window.cancelAnimationFrame);if(!W||!Z){var n=0;W=function(e){var t=+new Date;return n=Math.max(t,n+16),setTimeout(e,n-t)},Z=clearTimeout}var $={cubic:function(e){return--e*e*e+1},circ:function(e){return Math.sqrt(1-Math.pow(e-1,2))}},_="touchstart",ee="touchmove",te="touchend",ne=function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)},ie={root:null,rootMargin:"0px",threshold:[0,.01]},oe=120,re=250,ue=1e3,ae=2*ue/3,ce=3e3,se={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",onStart:function(e){},onMove:function(e){}},fe=document.createElement("div");return fe.style.display="none",document.body.appendChild(fe),function(e){var n=Object.assign({},se,e),i=n.index,o=n.root,r=n.elms,u=n.width,a=n.height,c=n.cycle,s=n.expose,f=n.auto,l=n.css,h=n.onEnd,d=n.ease,p=n.onMove,v=n.onStart;if(o){l&&(u=Number(ne(o,"width").slice(0,-2)),a=Number(ne(o,"height").slice(0,-2)));var x=o.children[0],m={main:-1,auto:-1},w=u/3,y=0,t=0,b=0,g=0,M=0,D=0,E=0,T=0,C=0,A=[],F=!1;f=c&&f;var N=r[i],k=function(e,t){var n,i;i=e.x=t,(n=e)&&(n.style.transition=n.style.webkitTransition="",n.style.transform=n.style.webkitTransform="translate3d("+i+"px, 0, 0)",p(N,x,r))},q=function(e){return fe.appendChild(e)},O=function(e){return x.appendChild(e)},S=function(e){return!c&&E<T&&N===A.head},X=function(e){return!c&&T<=E&&N===A.tail},j=function(e){return clearTimeout(m.auto)},I=function(e){j(),Z(m.main)};return function(){if(0!==r.length){s||(o.style.overflow="hidden"),o.style.position="relative",l||(o.style.width=u+"px",o.style.height=a+"px"),2===r.length&&c&&(r.push(r[0].cloneNode(!0)),O(r[2]),r.push(r[1].cloneNode(!0)),O(r[3]));var t=1===r.length;F=2===r.length,A=new U(r),k(N,0),t||F||k(N.prev,-u),t||k(N.next,u),r.forEach(function(e){e.style.position="absolute",l||(e.style.width=u+"px",e.style.height=a+"px"),e.style.overflow="hidden",F||t||e===N||e===N.prev||e===N.next||q(e)}),t||(F||c||0!==i||q(N.prev),F||c||i!==r.length-1||q(N.next),H(),J(o,_,L),J(o,ee,R),J(o,te,B),f&&W(function(){n.unobserve=function(e,t){if(!window.IntersectionObserver)return t();var n=new IntersectionObserver(t,ie);return n.observe(e),function(){n.unobserve(e)}}(o,function(e){e&&0===e[0].intersectionRatio?j(y=16):V()})}))}}(),{destroy:H,index:function(e){return N.index}}}function L(e){I(),g=y=0;var t=e.touches[0];D=Date.now(),b=T=E=t.pageX,C=t.clientY,v(x)}function R(e){if(2!==y&&4!==y){var t=e.touches[0],n=t.pageX-T;if(0===y&&2*Math.abs(n)<Math.abs(t.clientY-C))y=4;else{var i=0<n?1:-1;g!==i&&(b=T,D=Date.now(),g=i),y=1,T=t.pageX,k(x,M+=n),e.preventDefault()}}}function Y(){F||q(N.next),N=N.prev,S()||(k(N.prev,N.x-u),O(N.prev))}function z(){F||q(N.prev),N=N.next,X()||(k(N.next,N.x+u),O(N.next))}function P(){0===t&&-N.x-M>u/2&&(t=1,z())}function V(){j(),m.auto=setTimeout(function(){t=0,y=8,G(x,M,M-u,ae,P,V)},ce)}function B(e){if(f&&V(),4!==y){y=2;var t=b<T,n=Date.now()-D<oe;if(!S()&&!X()){var i=N.x+M;n?t&&0<i?Y():!t&&i<0&&z():w<i?Y():i<-w&&z()}var o=-1*N.x,r=Math.min(Math.max(ue*Math.abs(o-M)/u,re),ae);G(x,M,o,n?re:r)}}function G(i,o,r,u,a,c){var s=Date.now();!function e(){Q(a)&&a();var t=Date.now()-s;if(u<=t)return k(i,r),16!==y&&Q(c)&&c(),Q(h)&&h(N.index,x);var n=(r-o)*$[d](t/u)+o;k(i,M=n),m.main=W(e)}()}function H(){I(),Q(n.unobserve)&&n.unobserve(),K(o,_,L),K(o,ee,R),K(o,te,B)}}});